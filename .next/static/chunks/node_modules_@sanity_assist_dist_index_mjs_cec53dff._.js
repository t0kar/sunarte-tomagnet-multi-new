(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push(["static/chunks/node_modules_@sanity_assist_dist_index_mjs_cec53dff._.js", {

"[project]/node_modules/@sanity/assist/dist/index.mjs [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "SchemaTypeTool": (()=>SchemaTypeTool),
    "assist": (()=>assist),
    "contextDocumentTypeName": (()=>contextDocumentTypeName),
    "defaultLanguageOutputs": (()=>defaultLanguageOutputs)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/sanity/lib/index.mjs [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@sanity/types/lib/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@sanity/ui/dist/index.mjs [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@sanity/ui/dist/_chunks-es/_visual-editing.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/sanity/lib/_chunks-es/pane.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__DocumentPaneProviderWrapper__as__DocumentPaneProvider$3e$__ = __turbopack_context__.i("[project]/node_modules/sanity/lib/_chunks-es/pane.mjs [app-client] (ecmascript) <export DocumentPaneProviderWrapper as DocumentPaneProvider>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$assist$2f$node_modules$2f$date$2d$fns$2f$minutesToMilliseconds$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@sanity/assist/node_modules/date-fns/minutesToMilliseconds.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$assist$2f$node_modules$2f$date$2d$fns$2f$isAfter$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@sanity/assist/node_modules/date-fns/isAfter.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$assist$2f$node_modules$2f$date$2d$fns$2f$addSeconds$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@sanity/assist/node_modules/date-fns/addSeconds.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$assist$2f$node_modules$2f$date$2d$fns$2f$formatDistanceToNow$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@sanity/assist/node_modules/date-fns/formatDistanceToNow.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@sanity/icons/dist/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$mutator$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@sanity/mutator/lib/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/styled-components/dist/styled-components.browser.esm.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$tap$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/operators/tap.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$mergeMap$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$share$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/operators/share.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$take$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/operators/take.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$filter$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/operators/filter.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$distinctUntilChanged$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$catchError$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/operators/catchError.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lodash$2d$es$2f$get$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__get$3e$__ = __turbopack_context__.i("[project]/node_modules/lodash-es/get.js [app-client] (ecmascript) <export default as get>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$react$2d$fast$2d$compare$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/react-fast-compare/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$throwError$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/observable/throwError.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$of$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/observable/of.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$partition$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/observable/partition.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$merge$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/observable/merge.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$switchMap$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/operators/switchMap.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$delay$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/operators/delay.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$defer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs/dist/esm5/internal/observable/defer.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2d$exhaustmap$2d$with$2d$trailing$2f$dist$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/rxjs-exhaustmap-with-trailing/dist/esm/index.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
function hasOverflowScroll(el) {
    const overflow = getComputedStyle(el).overflow;
    return overflow.includes("auto") || overflow.includes("hidden") || overflow.includes("scroll");
}
function useRegionRects() {
    const ref = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null), [relativeBoundsRect, setRelativeBoundsRect] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null), [relativeElementRect, setRelativeElementRect] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null), [boundsScroll, setBoundsScroll] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])({
        x: 0,
        y: 0
    }), [scroll, setScroll] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])({
        x: 0,
        y: 0
    }), boundsScrollXRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(0), boundsScrollYRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(0), elementScrollXRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(0), elementScrollYRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(0);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useRegionRects.useEffect": ()=>{
            const el = ref.current;
            if (!el) return;
            const scrollParents = [];
            let parent = el.parentElement;
            for(; parent && parent !== document.body;)hasOverflowScroll(parent) && scrollParents.push(parent), parent = parent.parentElement;
            function handleResize() {
                const boundsRect = scrollParents[0]?.getBoundingClientRect() || {
                    x: 0,
                    y: 0,
                    width: window.innerWidth,
                    height: window.innerHeight
                }, domRect = el.getBoundingClientRect();
                setRelativeBoundsRect({
                    x: boundsRect.x + boundsScrollXRef.current,
                    y: boundsRect.y + boundsScrollYRef.current,
                    w: boundsRect.width,
                    h: boundsRect.height
                }), setRelativeElementRect({
                    x: domRect.x + elementScrollXRef.current,
                    y: domRect.y + elementScrollYRef.current,
                    w: domRect.width,
                    h: domRect.height
                });
            }
            function handleScroll() {
                let scrollX = window.scrollX, scrollY = window.scrollY;
                for (const scrollParent2 of scrollParents)scrollX += scrollParent2.scrollLeft, scrollY += scrollParent2.scrollTop;
                const scrollParent = scrollParents[0];
                boundsScrollXRef.current = scrollX - (scrollParent?.scrollLeft || window.scrollX), boundsScrollYRef.current = scrollY - (scrollParent?.scrollTop || window.scrollY), setBoundsScroll({
                    x: boundsScrollXRef.current,
                    y: boundsScrollYRef.current
                }), elementScrollXRef.current = scrollX, elementScrollYRef.current = scrollY, setScroll({
                    x: scrollX,
                    y: scrollY
                });
            }
            window.addEventListener("scroll", handleScroll, {
                passive: !0
            });
            const ro = new ResizeObserver(handleResize);
            ro.observe(el);
            for (const scrollParent of scrollParents)scrollParent.addEventListener("scroll", handleScroll, {
                passive: !0
            }), ro.observe(scrollParent);
            return handleScroll(), ({
                "useRegionRects.useEffect": ()=>{
                    ro.unobserve(el);
                    for (const scrollParent of scrollParents)ro.unobserve(scrollParent), scrollParent.removeEventListener("scroll", handleScroll);
                    ro.disconnect(), window.removeEventListener("scroll", handleScroll);
                }
            })["useRegionRects.useEffect"];
        }
    }["useRegionRects.useEffect"], []);
    const bounds = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useRegionRects.useMemo[bounds]": ()=>relativeBoundsRect && {
                x: relativeBoundsRect.x - boundsScroll.x,
                y: relativeBoundsRect.y - boundsScroll.y,
                w: relativeBoundsRect.w,
                h: relativeBoundsRect.h
            }
    }["useRegionRects.useMemo[bounds]"], [
        relativeBoundsRect,
        boundsScroll
    ]), element = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useRegionRects.useMemo[element]": ()=>relativeElementRect && {
                x: relativeElementRect.x - scroll.x,
                y: relativeElementRect.y - scroll.y,
                w: relativeElementRect.w,
                h: relativeElementRect.h
            }
    }["useRegionRects.useMemo[element]"], [
        relativeElementRect,
        scroll
    ]);
    return {
        bounds,
        element,
        ref
    };
}
function ConnectorRegion(props) {
    const { children, onRectsChange, ...restProps } = props, { bounds, element, ref } = useRegionRects();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "ConnectorRegion.useEffect": ()=>{
            onRectsChange?.(bounds && element ? {
                bounds,
                element
            } : null);
        }
    }["ConnectorRegion.useEffect"], [
        bounds,
        element,
        onRectsChange
    ]), /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("div", {
        ...restProps,
        ref,
        children
    });
}
const ConnectorsStoreContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])(null);
function useConnectorsStore() {
    const store = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(ConnectorsStoreContext);
    if (!store) throw new Error("Missing connectors store context");
    return store;
}
function ConnectFromRegion(props) {
    const { children, _key: key, zIndex, ...restProps } = props, store = useConnectorsStore(), [rects, setRects] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "ConnectFromRegion.useEffect": ()=>store.from.subscribe(key, {
                zIndex
            })
    }["ConnectFromRegion.useEffect"], [
        key,
        store,
        zIndex
    ]), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "ConnectFromRegion.useEffect": ()=>{
            rects && store.from.next(key, rects);
        }
    }["ConnectFromRegion.useEffect"], [
        key,
        rects,
        store
    ]), /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ConnectorRegion, {
        ...restProps,
        onRectsChange: setRects,
        children
    });
}
function createConnectorsStore() {
    const configKeys = [], fieldKeys = [], channels = {
        from: /* @__PURE__ */ new Map(),
        to: /* @__PURE__ */ new Map()
    }, payloads = {
        from: /* @__PURE__ */ new Map(),
        to: /* @__PURE__ */ new Map()
    }, observers = [];
    function notifyObservers() {
        const connectors = [];
        for (const key of configKeys){
            const toRects = channels.to.get(key), toPayload = payloads.from.get(key), fromRects = channels.from.get(key), fromPayload = payloads.from.get(key);
            toRects && fromRects && connectors.push({
                key,
                from: {
                    ...fromRects,
                    payload: fromPayload
                },
                to: {
                    ...toRects,
                    payload: toPayload
                }
            });
        }
        for (const observer of observers)observer(connectors);
    }
    return {
        to: {
            subscribe (key, payload) {
                return channels.to.set(key, null), payloads.to.set(key, payload), configKeys.push(key), ()=>{
                    channels.to.delete(key), payloads.to.delete(key);
                    const idx = configKeys.indexOf(key);
                    idx > -1 && configKeys.splice(idx, 1), notifyObservers();
                };
            },
            next (key, rects) {
                channels.to.set(key, rects), fieldKeys.includes(key) && notifyObservers();
            }
        },
        connectors: {
            subscribe (observer) {
                return observers.push(observer), ()=>{
                    const idx = observers.indexOf(observer);
                    idx > -1 && observers.splice(idx, 1);
                };
            }
        },
        from: {
            subscribe (key, payload) {
                return channels.from.set(key, null), payloads.from.set(key, payload), fieldKeys.push(key), ()=>{
                    channels.from.delete(key), payloads.from.delete(key);
                    const idx = fieldKeys.indexOf(key);
                    idx > -1 && fieldKeys.splice(idx, 1), notifyObservers();
                };
            },
            next (key, rects) {
                channels.from.set(key, rects), configKeys.includes(key) && notifyObservers();
            }
        }
    };
}
function ConnectorsProvider(props) {
    const { children, onConnectorsChange } = props, store = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "ConnectorsProvider.useMemo[store]": ()=>createConnectorsStore()
    }["ConnectorsProvider.useMemo[store]"], []);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "ConnectorsProvider.useEffect": ()=>onConnectorsChange && store.connectors.subscribe(onConnectorsChange)
    }["ConnectorsProvider.useEffect"], [
        onConnectorsChange,
        store
    ]), /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ConnectorsStoreContext.Provider, {
        value: store,
        children
    });
}
function getConnectorLinePoint(options2, rect, bounds) {
    const centerY = rect.y + rect.h / 2, isAbove = rect.y + rect.h < bounds.y + options2.arrow.marginY, isBelow = rect.y > bounds.y + bounds.h - options2.arrow.marginY;
    return {
        bounds,
        x: rect.x,
        y: centerY,
        centerY,
        startY: rect.y + options2.path.marginY,
        endY: rect.y + rect.h - options2.path.marginY,
        isAbove,
        isBelow,
        outOfBounds: isAbove || isBelow
    };
}
function mapConnectorToLine(options2, connector) {
    const fromBounds = {
        y: connector.from.bounds.y + options2.arrow.threshold,
        // bottom: connector.from.bounds.y + connector.from.bounds.h - options.arrow.threshold,
        x: connector.from.bounds.x,
        // right: connector.from.bounds.x + connector.from.bounds.w,
        w: connector.from.bounds.w,
        h: connector.from.bounds.h - options2.arrow.threshold * 2
    }, from = getConnectorLinePoint(options2, connector.from.element, fromBounds);
    from.x = connector.from.element.x + connector.from.element.w;
    const fromBottom = fromBounds.y + fromBounds.h, toBounds = {
        y: connector.to.bounds.y + options2.arrow.threshold,
        // bottom: connector.to.bounds.y + connector.to.bounds.h - options.arrow.threshold,
        x: connector.to.bounds.x,
        // right: connector.to.bounds.x + connector.to.bounds.w,
        w: connector.to.bounds.w,
        h: connector.to.bounds.h - options2.arrow.threshold * 2
    }, toBottom = toBounds.y + toBounds.h, to = getConnectorLinePoint(options2, connector.to.element, toBounds), maxStartY = Math.max(to.startY, from.startY);
    return from.y = Math.min(maxStartY, from.endY), from.y < toBounds.y ? from.y = Math.min(toBounds.y, from.endY) : from.y > toBottom && (from.y = Math.max(toBottom, from.startY)), to.y = Math.min(maxStartY, to.endY), to.y < fromBounds.y ? to.y = Math.min(fromBounds.y, to.endY) : to.y > fromBottom && (to.y = Math.max(fromBottom, to.startY)), from.y = Math.min(Math.max(from.y, fromBounds.y), fromBottom), to.y = Math.min(Math.max(to.y, toBounds.y), toBottom), {
        from,
        to
    };
}
const assistFormId = "assist", assistDocumentIdPrefix = "sanity.assist.schemaType.", assistDocumentStatusIdPrefix = "sanity.assist.status.", assistSchemaIdPrefix = "sanity.assist.schema.", assistDocumentTypeName = "sanity.assist.schemaType.annotations", assistFieldTypeName = "sanity.assist.schemaType.field", instructionTypeName = "sanity.assist.instruction", promptTypeName = "sanity.assist.instruction.prompt", userInputTypeName = "sanity.assist.instruction.userInput", instructionContextTypeName = "sanity.assist.instruction.context", fieldReferenceTypeName = "sanity.assist.instruction.fieldRef", contextDocumentTypeName = "assist.instruction.context", assistTasksStatusTypeName = "sanity.assist.task.status", instructionTaskTypeName = "sanity.assist.instructionTask", fieldPresenceTypeName = "sanity.assist.instructionTask.presence", assistSerializedTypeName = "sanity.assist.serialized.type", assistSerializedFieldTypeName = "sanity.assist.serialized.field", outputFieldTypeName = "sanity.assist.output.field", outputTypeTypeName = "sanity.assist.output.type", fieldPathParam = "pathKey", instructionParam = "instruction", documentRootKey = "<document>";
function usePathKey(path) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "usePathKey.useMemo": ()=>getPathKey(path)
    }["usePathKey.useMemo"], [
        path
    ]);
}
function getPathKey(path) {
    return path.length ? Array.isArray(path) ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(path) : path : documentRootKey;
}
function getInstructionTitle(instruction2) {
    return instruction2?.title ?? "Untitled";
}
function isPortableTextArray(type) {
    return type.of.find((t)=>isType(t, "block"));
}
function isType(schemaType, typeName) {
    return schemaType.name === typeName ? !0 : schemaType.type ? isType(schemaType.type, typeName) : !1;
}
function isImage(schemaType) {
    return isType(schemaType, "image");
}
function getDescriptionFieldOption(schemaType) {
    return schemaType ? schemaType.options?.aiAssist?.imageDescriptionField || getDescriptionFieldOption(schemaType.type) : void 0;
}
function getImageInstructionFieldOption(schemaType) {
    return schemaType ? schemaType.options?.aiAssist?.imageInstructionField || getImageInstructionFieldOption(schemaType.type) : void 0;
}
function isSchemaAssistEnabled(type) {
    return !type.options?.aiAssist?.exclude;
}
function isAssistSupported(type) {
    return !isSchemaAssistEnabled(type) || isDisabled(type) ? !1 : type.jsonType === "array" ? !type.of.every((t)=>isDisabled(t)) : type.jsonType === "object" ? !type.fields.every((field)=>isDisabled(field.type)) : !0;
}
function isDisabled(type) {
    return !isSchemaAssistEnabled(type) || isUnsupportedType(type);
}
function isUnsupportedType(type) {
    return type.jsonType === "number" || type.name === "sanity.imageCrop" || type.name === "sanity.imageHotspot" || isType(type, "globalDocumentReference") || isType(type, "reference") && !type?.options?.aiAssist?.embeddingsIndex || isType(type, "crossDatasetReference") || isType(type, "slug") || isType(type, "url") || isType(type, "date") || isType(type, "datetime") || isType(type, "file");
}
const FirstAssistedPathContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])(void 0);
function FirstAssistedPathProvider(props) {
    const { members } = props, firstAssistedPath = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "FirstAssistedPathProvider.useMemo[firstAssistedPath]": ()=>{
            const firstAssisted = members.find({
                "FirstAssistedPathProvider.useMemo[firstAssistedPath].firstAssisted": (member)=>member.kind === "field" && isAssistSupported(member.field.schemaType)
            }["FirstAssistedPathProvider.useMemo[firstAssistedPath].firstAssisted"]);
            return firstAssisted?.field.path ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(firstAssisted?.field.path) : void 0;
        }
    }["FirstAssistedPathProvider.useMemo[firstAssistedPath]"], [
        members
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FirstAssistedPathContext.Provider, {
        value: firstAssistedPath,
        children: props.children
    });
}
const releaseAnnouncementUrl = "https://www.sanity.io/blog/sanity-ai-assist-announcement?utm_source=sanity-assist-plugin&utm_medium=organic_social&utm_campaign=ai-assist&utm_content=", instructionGuideUrl = "https://sanity.io/guides/getting-started-with-ai-assist-instructions?utm_source=sanity-assist-plugin&utm_medium=organic_social&utm_campaign=ai-assist&utm_content=", giveFeedbackUrl = "https://forms.gle/Kwz7CThxGeA2GiEU8", salesUrl = "https://www.sanity.io/contact/sales?utm_source=sanity-assist-plugin&utm_medium=organic_social&utm_campaign=ai-assist&utm_content=", packageName = "@sanity/assist", pluginTitle = "Sanity AI Assist", pluginTitleShort = "AI Assist", maxHistoryVisibilityMs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$assist$2f$node_modules$2f$date$2d$fns$2f$minutesToMilliseconds$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["minutesToMilliseconds"])(30), illegalIdChars = /[^a-zA-Z0-9._-]/g;
function assistDocumentId(documentType) {
    return `${assistDocumentIdPrefix}${documentType}`.replace(illegalIdChars, "_");
}
function assistTasksStatusId(documentId) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["isVersionId"])(documentId) ? `${assistDocumentStatusIdPrefix}${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getVersionFromId"])(documentId)}.${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getPublishedId"])(documentId)}` : `${assistDocumentStatusIdPrefix}${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getPublishedId"])(documentId)}`;
}
function useDocumentState(id, docType) {
    const state = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useEditState"])(id, docType);
    return state.draft || state.published;
}
function useStudioAssistDocument({ documentId, schemaType, initDoc }) {
    const documentTypeName = schemaType.name, currentUser = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useCurrentUser"])(), assistDocument = useDocumentState(assistDocumentId(documentTypeName), assistDocumentTypeName), assistTasksStatus = useDocumentState(assistTasksStatusId(documentId ?? ""), assistTasksStatusTypeName), client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useClient"])({
        apiVersion: "2023-01-01"
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useStudioAssistDocument.useEffect": ()=>{
            !assistDocument && initDoc && client.createIfNotExists({
                _id: assistDocumentId(documentTypeName),
                _type: assistDocumentTypeName
            }).catch({
                "useStudioAssistDocument.useEffect": ()=>{}
            }["useStudioAssistDocument.useEffect"]);
        }
    }["useStudioAssistDocument.useEffect"], [
        client,
        assistDocument,
        documentTypeName,
        initDoc
    ]), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useStudioAssistDocument.useMemo": ()=>{
            if (!assistDocument) return;
            const tasks = assistTasksStatus?.tasks ?? [], fields = (assistDocument?.fields ?? []).map({
                "useStudioAssistDocument.useMemo.fields": (assistField)=>({
                        ...assistField,
                        tasks: tasks.filter({
                            "useStudioAssistDocument.useMemo.fields": (task)=>task.path === assistField.path
                        }["useStudioAssistDocument.useMemo.fields"]),
                        instructions: assistField.instructions?.filter({
                            "useStudioAssistDocument.useMemo.fields": (p)=>!p.userId || p.userId === currentUser?.id
                        }["useStudioAssistDocument.useMemo.fields"]).map({
                            "useStudioAssistDocument.useMemo.fields": (instruction2)=>asStudioInstruction(instruction2, tasks)
                        }["useStudioAssistDocument.useMemo.fields"])
                    })
            }["useStudioAssistDocument.useMemo.fields"]);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])({
                ...assistDocument,
                tasks: tasks?.map({
                    "useStudioAssistDocument.useMemo": (task)=>{
                        const instruction2 = fields.find({
                            "useStudioAssistDocument.useMemo": (f)=>f.path === task.path
                        }["useStudioAssistDocument.useMemo"])?.instructions?.find({
                            "useStudioAssistDocument.useMemo": (i)=>i._key === task.instructionKey
                        }["useStudioAssistDocument.useMemo"]);
                        return {
                            ...task,
                            instruction: instruction2
                        };
                    }
                }["useStudioAssistDocument.useMemo"]),
                fields
            });
        }
    }["useStudioAssistDocument.useMemo"], [
        assistDocument,
        assistTasksStatus,
        currentUser
    ]);
}
function asStudioInstruction(instruction2, run) {
    return {
        ...instruction2,
        tasks: run.filter((task)=>task.instructionKey === instruction2._key).filter((task)=>task.started && /* @__PURE__ */ new Date().getTime() - new Date(task.started).getTime() < maxHistoryVisibilityMs)
    };
}
const NO_TASKS = [];
function useInstructionToaster(documentId, documentSchemaType) {
    const assistDocument = useStudioAssistDocument({
        documentId,
        schemaType: documentSchemaType
    }), assistDocLoaded = !!assistDocument, currentUser = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useCurrentUser"])(), toast = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useToast"])(), tasks = assistDocument?.tasks, previousTasks = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])("initial");
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useInstructionToaster.useEffect": ()=>{
            if (assistDocLoaded) {
                if (previousTasks.current !== "initial") {
                    const prevTaskByKey = Object.fromEntries((previousTasks.current ?? NO_TASKS).map({
                        "useInstructionToaster.useEffect.prevTaskByKey": (run)=>[
                                run._key,
                                run
                            ]
                    }["useInstructionToaster.useEffect.prevTaskByKey"]));
                    tasks?.filter({
                        "useInstructionToaster.useEffect": (task)=>task.startedByUserId === currentUser?.id
                    }["useInstructionToaster.useEffect"]).filter({
                        "useInstructionToaster.useEffect": (task)=>{
                            const prevTask = prevTaskByKey[task._key];
                            return !prevTask && task.ended || !prevTask?.ended && task.ended;
                        }
                    }["useInstructionToaster.useEffect"]).filter({
                        "useInstructionToaster.useEffect": (task)=>task.ended && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$assist$2f$node_modules$2f$date$2d$fns$2f$isAfter$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAfter"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$assist$2f$node_modules$2f$date$2d$fns$2f$addSeconds$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["addSeconds"])(new Date(task.ended), 30), /* @__PURE__ */ new Date())
                    }["useInstructionToaster.useEffect"])?.forEach({
                        "useInstructionToaster.useEffect": (task)=>{
                            const title = task.title ?? getInstructionTitle(task.instruction);
                            task.reason === "error" ? toast.push({
                                title: `Failed: ${title}`,
                                status: "error",
                                description: `Instruction failed. ${task.message ?? ""}`,
                                closable: !0,
                                duration: 1e4
                            }) : task.reason === "timeout" ? toast.push({
                                title: `Timeout: ${title}`,
                                status: "error",
                                description: "Instruction timed out.",
                                closable: !0
                            }) : task.reason === "success" ? toast.push({
                                title: `Success: ${title}`,
                                status: "success",
                                description: "Instruction completed.",
                                closable: !0
                            }) : task.reason === "aborted" && toast.push({
                                title: `Canceled: ${title}`,
                                status: "warning",
                                description: "Instruction canceled.",
                                closable: !0
                            });
                        }
                    }["useInstructionToaster.useEffect"]);
                }
                previousTasks.current = tasks;
            }
        }
    }["useInstructionToaster.useEffect"], [
        tasks,
        previousTasks,
        toast,
        currentUser,
        assistDocLoaded
    ]);
}
function AssistDocumentInputWrapper(props) {
    if (!isType(props.schemaType, "document") && props.id !== "root" && props.id !== assistFormId) return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistInput, {
        ...props
    });
    const documentId = props.value?._id;
    return documentId ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistDocumentInput, {
        ...props,
        documentId
    }) : props.renderDefault(props);
}
function AssistDocumentInput({ documentId, ...props }) {
    useInstructionToaster(documentId, props.schemaType);
    const schemaType = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistDocumentInput.useMemo[schemaType]": ()=>props.schemaType.name !== assistDocumentTypeName ? props.schemaType : {
                ...props.schemaType,
                type: {
                    ...props.schemaType.type,
                    // compatability with i18nArrays plugin that requires this to be document
                    name: "document"
                }
            }
    }["AssistDocumentInput.useMemo[schemaType]"], [
        props.schemaType
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FirstAssistedPathProvider, {
        members: props.members,
        children: props.renderDefault({
            ...props,
            schemaType
        })
    });
}
function AssistInput(props) {
    const { zIndex } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useLayer"])(), { paneKey } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDocumentPane"])(), pathKey = usePathKey(props.path);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ConnectFromRegion, {
        _key: `${paneKey}_${pathKey}`,
        zIndex,
        style: {
            minWidth: 0
        },
        children: props.renderDefault(props)
    });
}
const AssistDocumentContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])(void 0);
function useAssistDocumentContext() {
    const context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(AssistDocumentContext);
    if (!context) throw new Error("AssistDocumentContext value is missing");
    return context;
}
const SelectedFieldContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])(void 0), SelectedFieldContextProvider = SelectedFieldContext.Provider, maxDepth = 6;
function getTypeIcon(schemaType) {
    let t = schemaType;
    for(; t;){
        if (t.icon) return t.icon;
        t = t.type;
    }
    return isType(schemaType, "slug") ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LinkIcon"] : isType(schemaType, "image") ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ImageIcon"] : schemaType.jsonType === "array" && isPortableTextArray(schemaType) ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BlockContentIcon"] : schemaType.jsonType === "array" ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["OlistIcon"] : schemaType.jsonType === "object" ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BlockquoteIcon"] : schemaType.jsonType === "string" ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["StringIcon"] : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DocumentIcon"];
}
function getFieldRefsWithDocument(schemaType) {
    const fields = getFieldRefs(schemaType);
    return [
        {
            key: documentRootKey,
            icon: schemaType.icon ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DocumentIcon"],
            title: "The entire document",
            path: [],
            schemaType
        },
        ...fields
    ];
}
function getFieldRefs(schemaType, parent, depth = 0) {
    return depth >= maxDepth ? [] : schemaType.fields.filter((f)=>!f.name.startsWith("_")).flatMap((field)=>{
        const path = parent ? [
            ...parent.path,
            field.name
        ] : [
            field.name
        ], title = field.type.title ?? field.name, fieldRef = {
            key: patchableKey((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(path)),
            path,
            title: parent ? [
                parent.title,
                title
            ].join(" / ") : title,
            schemaType: field.type,
            icon: getTypeIcon(field.type)
        }, fields = field.type.jsonType === "object" ? getFieldRefs(field.type, fieldRef, depth + 1) : [], syntheticFields = field.type.jsonType === "array" ? getSyntheticFields(field.type, fieldRef, depth + 1) : [];
        return isAssistSupported(field.type) ? [
            fieldRef,
            ...fields,
            ...syntheticFields
        ] : [
            ...fields,
            ...syntheticFields
        ];
    });
}
function getSyntheticFields(schemaType, parent, depth = 0) {
    return depth >= maxDepth ? [] : schemaType.of.filter((itemType)=>!isType(itemType, "block")).flatMap((itemType)=>{
        const segment = {
            _key: itemType.name
        }, title = itemType.title ?? itemType.name, path = [
            ...parent.path,
            segment
        ], fieldRef = {
            key: patchableKey((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(path)),
            path,
            title: [
                parent.title,
                title
            ].join(" / "),
            schemaType: itemType,
            icon: getTypeIcon(itemType),
            synthetic: !0
        }, fields = itemType.jsonType === "object" ? getFieldRefs(itemType, fieldRef, depth + 1) : [];
        return isAssistSupported(itemType) ? [
            fieldRef,
            ...fields
        ] : fields;
    });
}
function getTypePath(doc, pathString) {
    if (!pathString) return;
    const path = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["stringToPath"])(pathString), currentPath = [];
    let valid = !0;
    const syntheticPath = path.map((segment)=>{
        if (currentPath.push(segment), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isKeySegment"])(segment)) {
            const match = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$mutator$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["extractWithPath"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(currentPath), doc)[0], value = match?.value;
            if (match && value && typeof value == "object" && "_type" in value) return {
                _key: value._type
            };
            valid = !1;
        }
        return segment;
    });
    return valid ? patchableKey((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(syntheticPath)) : void 0;
}
function patchableKey(pathKey) {
    return pathKey.replace(/[=]=/g, ":").replace(/[[\]]/g, "|").replace(/"/g, "");
}
function useTypePath(doc, pathString) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useTypePath.useMemo": ()=>getTypePath(doc, pathString)
    }["useTypePath.useMemo"], [
        doc,
        pathString
    ]);
}
function useSelectedField(documentSchemaType, path) {
    const selectableFields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useSelectedField.useMemo[selectableFields]": ()=>documentSchemaType && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isObjectSchemaType"])(documentSchemaType) ? getFieldRefsWithDocument(documentSchemaType) : []
    }["useSelectedField.useMemo[selectableFields]"], [
        documentSchemaType
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useSelectedField.useMemo": ()=>path ? selectableFields?.find({
                "useSelectedField.useMemo": (f)=>f.key === path
            }["useSelectedField.useMemo"]) : void 0
    }["useSelectedField.useMemo"], [
        selectableFields,
        path
    ]);
}
function getFieldTitle(field) {
    const schemaType = field?.schemaType;
    return field?.title ?? schemaType?.title ?? schemaType?.name ?? "Untitled";
}
function useAiPaneRouter() {
    const paneRouter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["usePaneRouter"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useAiPaneRouter.useMemo": ()=>({
                ...paneRouter,
                params: paneRouter.params ?? {}
            })
    }["useAiPaneRouter.useMemo"], [
        paneRouter
    ]);
}
const hiddenTypes = [
    "any",
    "array",
    "block",
    "boolean",
    "crossDatasetReference",
    "date",
    "datetime",
    "document",
    "email",
    "file",
    "globalDocumentReference",
    "image",
    "number",
    "object",
    "reference",
    "span",
    "string",
    "text",
    "url",
    "slug",
    "geopoint",
    "sanity.assetSourceData",
    "sanity.imageAsset",
    "sanity.fileAsset",
    "sanity.imageCrop",
    "sanity.imageHotspot",
    "sanity.imageMetadata",
    "sanity.imageDimensions",
    "sanity.imagePalette",
    "sanity.imagePaletteSwatch",
    assistSerializedTypeName,
    assistSerializedFieldTypeName,
    "sanity-agent.job.document"
], inlineTypes = [
    "document",
    "object",
    "image",
    "file"
];
function serializeSchema(schema, options2) {
    const list = schema.getTypeNames().filter((t)=>!(hiddenTypes.includes(t) || t.startsWith("sanity."))).map((t)=>schema.get(t)).filter((t)=>!!t).map((t)=>getSchemaStub(t, schema, options2)).filter((t)=>!("to" in t && t.to && !t.to.length || "of" in t && t.of && !t.of.length || "fields" in t && t.fields && !t.fields.length));
    return list.sort((a, b)=>(a?.name ?? "").localeCompare(b?.name ?? "")), list;
}
function getSchemaStub(schemaType, schema, options2) {
    if (!schemaType.type?.name) throw console.error("Missing type name", schemaType.type), new Error("Type is missing name!");
    const baseSchema = {
        // we dont need type or id when we send using POST, so leave these out to save bandwidth
        ...options2?.leanFormat ? {} : {
            _id: `${assistSchemaIdPrefix}${schemaType.name}`,
            _type: assistSerializedTypeName
        },
        name: schemaType.name,
        title: schemaType.title,
        type: schemaType.type.name,
        ...getBaseFields(schema, schemaType, schemaType.type.name, options2)
    };
    return removeUndef(baseSchema);
}
function getBaseFields(schema, type, typeName, options2) {
    const schemaOptions = removeUndef({
        imagePromptField: type.options?.aiAssist?.imageInstructionField,
        embeddingsIndex: type.options?.aiAssist?.embeddingsIndex
    });
    return removeUndef({
        options: Object.keys(schemaOptions).length ? schemaOptions : void 0,
        values: Array.isArray(type?.options?.list) ? type?.options?.list.map((v)=>typeof v == "string" ? v : v.value ?? `${v.title}`) : void 0,
        of: "of" in type && typeName === "array" ? arrayOf(type, schema, options2) : void 0,
        to: "to" in type && typeName === "reference" ? refToTypeNames(type) : void 0,
        fields: "fields" in type && inlineTypes.includes(typeName) ? serializeFields(schema, type, options2) : void 0,
        annotations: typeName === "block" && "fields" in type ? serializeAnnotations(type, schema, options2) : void 0,
        inlineOf: typeName === "block" && "fields" in type ? serializeInlineOf(type, schema, options2) : void 0,
        hidden: typeof type.hidden == "function" ? "function" : type.hidden ? !0 : void 0,
        readOnly: typeof type.readOnly == "function" ? "function" : type.readOnly ? !0 : void 0
    });
}
function serializeFields(schema, schemaType, options2) {
    return (schemaType.fieldsets ? schemaType.fieldsets.flatMap((fs)=>fs.single ? fs.field : fs.fields.map((f)=>({
                ...f,
                type: {
                    ...f.type,
                    // if fieldset is (conditionally) hidden, the field must be considered the same way
                    // ie, if the field does not show up in conditionalMembers, it is hidden
                    // regardless of weather or not it is the field function or the fieldset function that hides it
                    hidden: typeof fs.hidden == "function" ? fs.hidden : fs.hidden ? !0 : f.type.hidden
                }
            }))) : schemaType.fields).filter((f)=>![
            "sanity.imageHotspot",
            "sanity.imageCrop"
        ].includes(f.type?.name ?? "")).filter((f)=>isAssistSupported(f.type)).map((field)=>serializeMember(schema, field.type, field.name, options2));
}
function serializeMember(schema, type, name, options2) {
    const typeName = schema.get(type?.name) ? type.name : type.type?.name ?? "";
    return removeUndef({
        ...options2?.leanFormat ? {} : {
            _type: assistSerializedFieldTypeName
        },
        name,
        type: typeName,
        title: type.title,
        ...getBaseFields(schema, type, typeName, options2)
    });
}
function serializeInlineOf(blockSchemaType, schema, options2) {
    const childrenType = blockSchemaType.fields.find((f)=>f.name === "children")?.type;
    if (!(!childrenType || !(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isArraySchemaType"])(childrenType))) return arrayOf({
        ...childrenType,
        of: childrenType.of.filter((t)=>!isType(t, "span"))
    }, schema, options2);
}
function serializeAnnotations(blockSchemaType, schema, options2) {
    const marksType = blockSchemaType.fields.find((f)=>f.name === "markDefs")?.type;
    if (!(!marksType || !(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isArraySchemaType"])(marksType))) return arrayOf(marksType, schema, options2);
}
function arrayOf(arrayType, schema, options2) {
    return arrayType.of.filter((type)=>isAssistSupported(type)).map((t)=>serializeMember(schema, t, t.name, options2));
}
function refToTypeNames(type) {
    return type.to.map((t)=>({
            type: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])(t.name)
        }));
}
function removeUndef(obj) {
    return Object.keys(obj).forEach((key)=>obj[key] === void 0 ? delete obj[key] : {}), obj;
}
const basePath = "/assist/tasks/instruction";
function canUseAssist(status) {
    return status?.enabled && status.initialized && status.validToken;
}
function useApiClient(customApiClient) {
    const client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useClient"])({
        apiVersion: "2023-06-05"
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useApiClient.useMemo": ()=>customApiClient ? customApiClient(client) : client
    }["useApiClient.useMemo"], [
        client,
        customApiClient
    ]);
}
function useTranslate(apiClient) {
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1), user = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useCurrentUser"])(), schema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useSchema"])(), types = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useTranslate.useMemo[types]": ()=>serializeSchema(schema, {
                leanFormat: !0
            })
    }["useTranslate.useMemo[types]"], [
        schema
    ]), toast = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useToast"])(), translate = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useTranslate.useCallback[translate]": ({ documentId, languagePath, styleguide, translatePath, fieldLanguageMap, conditionalMembers })=>(setLoading(!0), apiClient.request({
                method: "POST",
                url: `/assist/tasks/translate/${apiClient.config().dataset}?projectId=${apiClient.config().projectId}`,
                body: {
                    documentId,
                    types,
                    languagePath,
                    userStyleguide: styleguide,
                    fieldLanguageMap,
                    conditionalMembers,
                    translatePath: translatePath.length === 0 ? documentRootKey : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(translatePath),
                    userId: user?.id
                }
            }).catch({
                "useTranslate.useCallback[translate]": (e)=>{
                    throw toast.push({
                        status: "error",
                        title: "Translate failed",
                        description: e.message
                    }), setLoading(!1), e;
                }
            }["useTranslate.useCallback[translate]"]).finally({
                "useTranslate.useCallback[translate]": ()=>{
                    setTimeout({
                        "useTranslate.useCallback[translate]": ()=>{
                            setLoading(!1);
                        }
                    }["useTranslate.useCallback[translate]"], 2e3);
                }
            }["useTranslate.useCallback[translate]"]))
    }["useTranslate.useCallback[translate]"], [
        setLoading,
        apiClient,
        toast,
        user,
        types
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useTranslate.useMemo": ()=>({
                translate,
                loading
            })
    }["useTranslate.useMemo"], [
        translate,
        loading
    ]);
}
function useGenerateCaption(apiClient) {
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1), user = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useCurrentUser"])(), schema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useSchema"])(), types = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useGenerateCaption.useMemo[types]": ()=>serializeSchema(schema, {
                leanFormat: !0
            })
    }["useGenerateCaption.useMemo[types]"], [
        schema
    ]), toast = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useToast"])(), generateCaption = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useGenerateCaption.useCallback[generateCaption]": ({ path, documentId })=>(setLoading(!0), apiClient.request({
                method: "POST",
                url: `/assist/tasks/generate-caption/${apiClient.config().dataset}?projectId=${apiClient.config().projectId}`,
                body: {
                    path,
                    documentId,
                    types,
                    userId: user?.id
                }
            }).catch({
                "useGenerateCaption.useCallback[generateCaption]": (e)=>{
                    throw toast.push({
                        status: "error",
                        title: "Generate image description failed",
                        description: e.message
                    }), setLoading(!1), e;
                }
            }["useGenerateCaption.useCallback[generateCaption]"]).finally({
                "useGenerateCaption.useCallback[generateCaption]": ()=>{
                    setTimeout({
                        "useGenerateCaption.useCallback[generateCaption]": ()=>{
                            setLoading(!1);
                        }
                    }["useGenerateCaption.useCallback[generateCaption]"], 2e3);
                }
            }["useGenerateCaption.useCallback[generateCaption]"]))
    }["useGenerateCaption.useCallback[generateCaption]"], [
        setLoading,
        apiClient,
        toast,
        user,
        types
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useGenerateCaption.useMemo": ()=>({
                generateCaption,
                loading
            })
    }["useGenerateCaption.useMemo"], [
        generateCaption,
        loading
    ]);
}
function useGenerateImage(apiClient) {
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1), user = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useCurrentUser"])(), schema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useSchema"])(), types = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useGenerateImage.useMemo[types]": ()=>serializeSchema(schema, {
                leanFormat: !0
            })
    }["useGenerateImage.useMemo[types]"], [
        schema
    ]), toast = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useToast"])(), generateImage = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useGenerateImage.useCallback[generateImage]": ({ path, documentId })=>(setLoading(!0), apiClient.request({
                method: "POST",
                url: `/assist/tasks/generate-image/${apiClient.config().dataset}?projectId=${apiClient.config().projectId}`,
                body: {
                    path,
                    documentId,
                    types,
                    userId: user?.id
                }
            }).catch({
                "useGenerateImage.useCallback[generateImage]": (e)=>{
                    throw toast.push({
                        status: "error",
                        title: "Generate image from prompt failed",
                        description: e.message
                    }), setLoading(!1), e;
                }
            }["useGenerateImage.useCallback[generateImage]"]).finally({
                "useGenerateImage.useCallback[generateImage]": ()=>{
                    setTimeout({
                        "useGenerateImage.useCallback[generateImage]": ()=>{
                            setLoading(!1);
                        }
                    }["useGenerateImage.useCallback[generateImage]"], 2e3);
                }
            }["useGenerateImage.useCallback[generateImage]"]))
    }["useGenerateImage.useCallback[generateImage]"], [
        setLoading,
        apiClient,
        toast,
        user,
        types
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useGenerateImage.useMemo": ()=>({
                generateImage,
                loading
            })
    }["useGenerateImage.useMemo"], [
        generateImage,
        loading
    ]);
}
function useGetInstructStatus(apiClient) {
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!0), getInstructStatus = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useGetInstructStatus.useCallback[getInstructStatus]": async ()=>{
            setLoading(!0);
            const projectId = apiClient.config().projectId;
            try {
                return await apiClient.request({
                    method: "GET",
                    url: `${basePath}/${apiClient.config().dataset}/status?projectId=${projectId}`
                });
            } finally{
                setLoading(!1);
            }
        }
    }["useGetInstructStatus.useCallback[getInstructStatus]"], [
        setLoading,
        apiClient
    ]);
    return {
        loading,
        getInstructStatus
    };
}
function useInitInstruct(apiClient) {
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1), initInstruct = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useInitInstruct.useCallback[initInstruct]": ()=>(setLoading(!0), apiClient.request({
                method: "GET",
                url: `${basePath}/${apiClient.config().dataset}/init?projectId=${apiClient.config().projectId}`
            }).finally({
                "useInitInstruct.useCallback[initInstruct]": ()=>{
                    setLoading(!1);
                }
            }["useInitInstruct.useCallback[initInstruct]"]))
    }["useInitInstruct.useCallback[initInstruct]"], [
        setLoading,
        apiClient
    ]);
    return {
        loading,
        initInstruct
    };
}
function useRunInstructionApi(apiClient) {
    const toast = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useToast"])(), [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1), user = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useCurrentUser"])(), schema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useSchema"])(), types = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useRunInstructionApi.useMemo[types]": ()=>serializeSchema(schema, {
                leanFormat: !0
            })
    }["useRunInstructionApi.useMemo[types]"], [
        schema
    ]), runInstruction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useRunInstructionApi.useCallback[runInstruction]": (request)=>(setLoading(!0), apiClient.request({
                method: "POST",
                url: `${basePath}/${apiClient.config().dataset}?projectId=${apiClient.config().projectId}`,
                body: {
                    ...request,
                    types,
                    userId: user?.id
                }
            }).catch({
                "useRunInstructionApi.useCallback[runInstruction]": (e)=>{
                    throw toast.push({
                        status: "error",
                        title: "Instruction failed",
                        description: e.message
                    }), e;
                }
            }["useRunInstructionApi.useCallback[runInstruction]"]).finally({
                "useRunInstructionApi.useCallback[runInstruction]": ()=>{
                    setLoading(!1);
                }
            }["useRunInstructionApi.useCallback[runInstruction]"]))
    }["useRunInstructionApi.useCallback[runInstruction]"], [
        apiClient,
        types,
        user,
        toast
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useRunInstructionApi.useMemo": ()=>({
                runInstruction,
                loading
            })
    }["useRunInstructionApi.useMemo"], [
        runInstruction,
        loading
    ]);
}
const AiAssistanceConfigContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])({});
function useAiAssistanceConfig() {
    const context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(AiAssistanceConfigContext);
    if (!context) throw new Error("Missing AiAssistanceConfigContext");
    return context;
}
function AiAssistanceConfigProvider(props) {
    const [status, setStatus] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(), [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(), apiClient = useApiClient(props.config?.__customApiClient), { getInstructStatus, loading: statusLoading } = useGetInstructStatus(apiClient), { initInstruct, loading: initLoading } = useInitInstruct(apiClient);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "AiAssistanceConfigProvider.useEffect": ()=>{
            getInstructStatus().then({
                "AiAssistanceConfigProvider.useEffect": (s)=>setStatus(s)
            }["AiAssistanceConfigProvider.useEffect"]).catch({
                "AiAssistanceConfigProvider.useEffect": (e)=>{
                    console.error(e), setError(e);
                }
            }["AiAssistanceConfigProvider.useEffect"]);
        }
    }["AiAssistanceConfigProvider.useEffect"], [
        getInstructStatus
    ]);
    const init = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "AiAssistanceConfigProvider.useCallback[init]": async ()=>{
            setError(void 0);
            try {
                await initInstruct();
                const status2 = await getInstructStatus();
                setStatus(status2);
            } catch (e) {
                console.error("Failed to init ai assistance", e), setError(e);
            }
        }
    }["AiAssistanceConfigProvider.useCallback[init]"], [
        initInstruct,
        getInstructStatus,
        setStatus
    ]), { config, children } = props, context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AiAssistanceConfigProvider.useMemo[context]": ()=>({
                config,
                status,
                statusLoading,
                init,
                initLoading,
                error
            })
    }["AiAssistanceConfigProvider.useMemo[context]"], [
        config,
        status,
        init,
        statusLoading,
        initLoading,
        error
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AiAssistanceConfigContext.Provider, {
        value: context,
        children
    });
}
const NO_INPUT = {}, RunInstructionContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])({
    runInstruction: ()=>{},
    instructionLoading: !1
});
function useRunInstruction() {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(RunInstructionContext);
}
function isUserInputBlock(block) {
    return block._type === userInputTypeName;
}
function RunInstructionProvider(props) {
    const { config } = useAiAssistanceConfig(), apiClient = useApiClient(config?.__customApiClient), { runInstruction: runInstructionRequest, loading } = useRunInstructionApi(apiClient), id = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useId"])(), [inputs, setInputs] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(NO_INPUT), [runRequest, setRunRequest] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(), runInstruction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "RunInstructionProvider.useCallback[runInstruction]": (req)=>{
            if (loading) return;
            const { instruction: instruction2, ...request } = req, instructionKey = instruction2._key, userInputBlocks = instruction2?.prompt?.flatMap({
                "RunInstructionProvider.useCallback[runInstruction]": (block)=>block._type === "block" ? block.children.filter(isUserInputBlock) : [
                        block
                    ]
            }["RunInstructionProvider.useCallback[runInstruction]"]).filter(isUserInputBlock);
            if (!userInputBlocks?.length) {
                runInstructionRequest({
                    ...request,
                    instructionKey,
                    userTexts: void 0
                });
                return;
            }
            setRunRequest({
                ...req,
                userInputBlocks
            });
        }
    }["RunInstructionProvider.useCallback[runInstruction]"], [
        runInstructionRequest,
        loading
    ]), close = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "RunInstructionProvider.useCallback[close]": ()=>{
            setRunRequest(void 0), setInputs(NO_INPUT);
        }
    }["RunInstructionProvider.useCallback[close]"], []), runWithInput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "RunInstructionProvider.useCallback[runWithInput]": ()=>{
            if (runRequest) {
                const { instruction: instruction2, userTexts, ...request } = runRequest;
                runInstructionRequest({
                    ...request,
                    instructionKey: instruction2._key,
                    userTexts: Object.entries(inputs).map({
                        "RunInstructionProvider.useCallback[runWithInput]": ([key, value])=>({
                                blockKey: key,
                                userInput: value
                            })
                    }["RunInstructionProvider.useCallback[runWithInput]"])
                });
            }
            close();
        }
    }["RunInstructionProvider.useCallback[runWithInput]"], [
        close,
        runInstructionRequest,
        runRequest,
        inputs
    ]), open = !!runRequest, runDisabled = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "RunInstructionProvider.useMemo[runDisabled]": ()=>(runRequest?.userInputBlocks?.length ?? 0) > Object.entries(inputs).filter({
                "RunInstructionProvider.useMemo[runDisabled]": ([, value])=>!!value
            }["RunInstructionProvider.useMemo[runDisabled]"]).length
    }["RunInstructionProvider.useMemo[runDisabled]"], [
        runRequest?.userInputBlocks,
        inputs
    ]), runButton = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
        text: "Run instruction",
        onClick: runWithInput,
        tone: "primary",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PlayIcon"],
        style: {
            width: "100%"
        },
        disabled: runDisabled
    }), contextValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "RunInstructionProvider.useMemo[contextValue]": ()=>({
                runInstruction,
                instructionLoading: loading
            })
    }["RunInstructionProvider.useMemo[contextValue]"], [
        runInstruction,
        loading
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(RunInstructionContext.Provider, {
        value: contextValue,
        children: [
            open ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Dialog"], {
                id,
                open,
                onClose: close,
                width: 1,
                header: getInstructionTitle(runRequest?.instruction),
                footer: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    justify: "space-between",
                    padding: 2,
                    flex: 1,
                    children: runDisabled ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Tooltip"], {
                        content: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                            padding: 2,
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                children: "Unable to run instruction. All fields must have a value."
                            })
                        }),
                        placement: "top",
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                            flex: 1,
                            children: runButton
                        })
                    }) : runButton
                }),
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                    padding: 4,
                    space: 2,
                    children: runRequest?.userInputBlocks?.map((block, i)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(UserInput, {
                            block,
                            autoFocus: i === 0,
                            inputs,
                            setInputs
                        }, block._key))
                })
            }) : null,
            props.children
        ]
    });
}
function UserInput(props) {
    const { block, autoFocus, setInputs, inputs } = props, key = block._key, textAreaRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null), onChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "UserInput.useCallback[onChange]": (e)=>{
            setInputs({
                "UserInput.useCallback[onChange]": (current)=>({
                        ...current,
                        [key]: (e.currentTarget ?? e.target).value
                    })
            }["UserInput.useCallback[onChange]"]);
        }
    }["UserInput.useCallback[onChange]"], [
        key,
        setInputs
    ]), value = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "UserInput.useMemo[value]": ()=>inputs[key]
    }["UserInput.useMemo[value]"], [
        inputs,
        key
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "UserInput.useEffect": ()=>{
            autoFocus && setTimeout({
                "UserInput.useEffect": ()=>textAreaRef.current?.focus()
            }["UserInput.useEffect"], 0);
        }
    }["UserInput.useEffect"], [
        autoFocus
    ]), /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
        padding: 2,
        space: 3,
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["FormFieldHeaderText"], {
                title: block?.message ?? "Provide more context",
                description: block.description
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TextArea"], {
                ref: textAreaRef,
                rows: 4,
                value,
                onChange,
                style: {
                    resize: "vertical"
                }
            })
        ]
    });
}
function isDocAssistable(documentSchemaType, published, draft) {
    return !!(documentSchemaType.liveEdit ? published : draft);
}
function useRequestRunInstruction(args) {
    const { runInstruction, instructionLoading } = useRunInstruction(), requestRunInstruction = useDraftDelayedTask({
        ...args,
        task: runInstruction
    });
    return {
        instructionLoading,
        requestRunInstruction
    };
}
function useDraftDelayedTask(args) {
    const { documentOnChange, isDocAssistable: isDocAssistable2, task } = args, [queuedArgs, setQueuedArgs] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(void 0);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useDraftDelayedTask.useEffect": ()=>{
            queuedArgs && isDocAssistable2 && (task(queuedArgs), setQueuedArgs(void 0));
        }
    }["useDraftDelayedTask.useEffect"], [
        queuedArgs,
        isDocAssistable2,
        task
    ]), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useDraftDelayedTask.useCallback": (taskArgs)=>{
            documentOnChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from([
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["unset"])([
                    "_force_document_creation"
                ])
            ])), setQueuedArgs(taskArgs);
        }
    }["useDraftDelayedTask.useCallback"], [
        setQueuedArgs,
        documentOnChange
    ]);
}
function useAssistDocumentContextValue(documentId, documentType) {
    const schema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useSchema"])(), documentSchemaType = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useAssistDocumentContextValue.useMemo[documentSchemaType]": ()=>{
            const schemaType = schema.get(documentType);
            if (!schemaType) throw new Error(`Schema type "${documentType}" not found`);
            return schemaType;
        }
    }["useAssistDocumentContextValue.useMemo[documentSchemaType]"], [
        documentType,
        schema
    ]), { openInspector, closeInspector, inspector, onChange: documentOnChange, // eslint-disable-next-line @typescript-eslint/ban-ts-comment
    // @ts-ignore this is a valid option available in `corel` - Remove after corel is merged to next
    selectedReleaseId, editState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDocumentPane"])(), { draft, published, version } = editState || {};
    let assistableDocumentId = version?._id || draft?._id || published?._id;
    assistableDocumentId || (assistableDocumentId = selectedReleaseId ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getVersionId"])(documentId, selectedReleaseId) : documentSchemaType.liveEdit ? documentId : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getDraftId"])(documentId));
    const documentIsNew = selectedReleaseId ? !version?._id : !draft?._id && !published?._id, documentIsAssistable = selectedReleaseId ? !!version : isDocAssistable(documentSchemaType, published, draft), { params } = useAiPaneRouter(), selectedPath = params[fieldPathParam], assistDocument = useStudioAssistDocument({
        documentId: assistableDocumentId,
        schemaType: documentSchemaType
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useAssistDocumentContextValue.useMemo": ()=>{
            const base = {
                assistableDocumentId,
                documentSchemaType,
                documentIsNew,
                documentIsAssistable,
                openInspector,
                closeInspector,
                inspector,
                documentOnChange,
                selectedPath
            };
            return assistDocument ? {
                ...base,
                loading: !1,
                assistDocument
            } : {
                ...base,
                loading: !0,
                assistDocument: void 0
            };
        }
    }["useAssistDocumentContextValue.useMemo"], [
        assistDocument,
        documentIsAssistable,
        assistableDocumentId,
        documentSchemaType,
        documentIsNew,
        openInspector,
        closeInspector,
        inspector,
        documentOnChange,
        selectedPath
    ]);
}
function AssistDocumentContextProvider(props) {
    const { documentId, documentType } = props, value = useAssistDocumentContextValue(documentId, documentType);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistDocumentContext.Provider, {
        value,
        children: props.children
    });
}
function AssistDocumentLayout(props) {
    const { documentId, documentType } = props;
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistDocumentContextProvider, {
        documentType,
        documentId,
        children: props.renderDefault(props)
    });
}
function AssistFeatureBadge() {
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Badge"], {
        fontSize: 0,
        style: {
            margin: "-2px 0"
        },
        tone: "primary",
        children: "Beta"
    });
}
function AssistOnboardingPopover(props) {
    const { dismiss } = props;
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Popover"], {
        content: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistIntroCard, {
            dismiss
        }),
        open: !0,
        portal: !0,
        placeholder: "bottom",
        tone: "default",
        width: 0,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
            radius: 2,
            shadow: 2,
            style: {
                padding: 2,
                lineHeight: 0
            },
            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                disabled: !0,
                fontSize: 1,
                icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SparklesIcon"],
                mode: "bleed",
                padding: 2
            })
        })
    });
}
function AssistIntroCard(props) {
    const buttonRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
        as: "section",
        padding: 3,
        space: 3,
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                padding: 2,
                space: 4,
                children: [
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                        gap: 2,
                        align: "center",
                        children: [
                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                as: "h1",
                                size: 1,
                                weight: "semibold",
                                children: pluginTitle
                            }),
                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                "aria-hidden": !0,
                                style: {
                                    margin: "-3px 0",
                                    lineHeight: 0
                                },
                                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistFeatureBadge, {})
                            })
                        ]
                    }),
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                        space: 3,
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                            as: "p",
                            muted: !0,
                            size: 1,
                            children: [
                                "Manage reusable AI instructions to boost your content creation and reduce amount of repetitive chores.",
                                " ",
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])("a", {
                                    href: releaseAnnouncementUrl,
                                    target: "_blank",
                                    rel: "noreferrer",
                                    children: [
                                        "Learn more ",
                                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ArrowRightIcon"], {})
                                    ]
                                })
                            ]
                        })
                    })
                ]
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                fontSize: 1,
                icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CheckmarkIcon"],
                onClick: props.dismiss,
                padding: 3,
                ref: buttonRef,
                text: "Ok, good to know!",
                tone: "primary"
            })
        ]
    });
}
const inspectorOnboardingKey = "sanityStudio:assist:inspector:onboarding:dismissed", fieldOnboardingKey = "sanityStudio:assist:field:onboarding:dismissed";
function isFeatureOnboardingDismissed(featureKey) {
    return typeof localStorage > "u" ? !1 : localStorage.getItem(featureKey) === "true";
}
function dismissFeatureOnboarding(featureKey) {
    typeof localStorage > "u" || localStorage.setItem(featureKey, "true");
}
function useOnboardingFeature(featureKey) {
    const [showOnboarding, setShowOnboarding] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])({
        "useOnboardingFeature.useState": ()=>!isFeatureOnboardingDismissed(featureKey)
    }["useOnboardingFeature.useState"]), dismissOnboarding = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useOnboardingFeature.useCallback[dismissOnboarding]": ()=>{
            setShowOnboarding(!1), dismissFeatureOnboarding(featureKey);
        }
    }["useOnboardingFeature.useCallback[dismissOnboarding]"], [
        setShowOnboarding,
        featureKey
    ]);
    return {
        showOnboarding,
        dismissOnboarding
    };
}
const fadeIn = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["keyframes"]`
  0% {
    opacity: 0;
    transform: scale(0.75);
  }
  40% {
    opacity: 0;
    transform: scale(0.75);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`, FadeInDiv = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"].div`
  animation-name: ${fadeIn};
  animation-timing-function: ease-in-out;
`, FadeInContent = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"])(function({ children, durationMs = 250 }, ref) {
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FadeInDiv, {
        ref,
        style: {
            animationDuration: `${durationMs}ms`
        },
        children
    });
}), purple = {
    50: {
        title: "Purple 50",
        hex: "#f8f5ff"
    },
    100: {
        title: "Purple 100",
        hex: "#f1ebff"
    },
    200: {
        title: "Purple 200",
        hex: "#ece1fe"
    },
    300: {
        title: "Purple 300",
        hex: "#ccb1fc"
    },
    400: {
        title: "Purple 400",
        hex: "#b087f7"
    },
    500: {
        title: "Purple 500",
        hex: "#8f57ef"
    },
    600: {
        title: "Purple 600",
        hex: "#721fe5"
    },
    700: {
        title: "Purple 700",
        hex: "#4c1a9e"
    },
    800: {
        title: "Purple 800",
        hex: "#2f1862"
    },
    900: {
        title: "Purple 900",
        hex: "#23173f"
    },
    950: {
        title: "Purple 950",
        hex: "#181128"
    }
}, Root = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"].span`
  display: block;
  width: 25px;
  height: 25px;
  position: relative;
`, dash = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["keyframes"]`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(43deg);
  }
`, Outline = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"].svg`
  display: block;
  position: absolute;
  top: 0;
  left: 0;

  & > circle {
    stroke: var(--ai-avatar-stroke-color);
    stroke-width: 1.5px;
    stroke-linecap: round;
    transform-origin: center;
    animation: ${dash} 500ms ease-in-out infinite;
    transition: stroke-dasharray 200ms ease-in-out;

    stroke-dasharray: 2.34px 0;

    [data-state='active'] > & {
      stroke-dasharray: 2px 2.34px;
    }
  }
`, IconDisc = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"].span`
  background: var(--ai-avatar-disc-color);
  color: white;
  width: 21px;
  height: 21px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 10.5px;
  position: absolute;
  top: 2px;
  left: 2px;
`;
function AssistAvatar(props) {
    const { state = "present" } = props, scheme = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useColorSchemeValue"])(), style = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistAvatar.useMemo[style]": ()=>scheme === "dark" ? {
                "--ai-avatar-stroke-color": purple[400].hex,
                "--ai-avatar-disc-color": purple[600].hex
            } : {
                "--ai-avatar-stroke-color": purple[500].hex,
                "--ai-avatar-disc-color": purple[600].hex
            }
    }["AssistAvatar.useMemo[style]"], [
        scheme
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(Root, {
        "data-state": state,
        style,
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(Outline, {
                width: "25",
                height: "25",
                viewBox: "0 0 25 25",
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg",
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("circle", {
                    cx: "12.5",
                    cy: "12.5",
                    r: "11.75"
                })
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(IconDisc, {
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                    as: "span",
                    size: 0,
                    style: {
                        color: "inherit"
                    },
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SparklesIcon"], {
                        style: {
                            color: "inherit"
                        }
                    })
                })
            })
        ]
    });
}
function AiFieldPresence(props) {
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        style: {
            position: "relative",
            background: "transparent"
        },
        contentEditable: !1,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Tooltip"], {
            placement: "left",
            content: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
                padding: 3,
                border: !0,
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    align: "center",
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        size: 1,
                        children: "Running instruction..."
                    })
                })
            }),
            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FadeInContent, {
                durationMs: 300,
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistAvatar, {
                    state: "active"
                })
            })
        })
    });
}
const NO_PRESENCE = [];
function useAssistPresence(path, showFocusWithin) {
    const context = useAssistDocumentContext(), tasks = (context && "assistDocument" in context ? context.assistDocument : void 0)?.tasks;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useAssistPresence.useMemo": ()=>{
            const activePresence = tasks?.filter({
                "useAssistPresence.useMemo": (task)=>!task.ended
            }["useAssistPresence.useMemo"])?.flatMap({
                "useAssistPresence.useMemo": (task)=>task.presence ?? []
            }["useAssistPresence.useMemo"])?.filter({
                "useAssistPresence.useMemo": (p)=>p.started && /* @__PURE__ */ new Date().getTime() - new Date(p.started).getTime() < maxHistoryVisibilityMs
            }["useAssistPresence.useMemo"]).filter({
                "useAssistPresence.useMemo": (presence)=>{
                    if (!presence.path || !path.length) return !1;
                    const statusPath = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["stringToPath"])(presence.path);
                    return !showFocusWithin && statusPath.length !== path.length ? !1 : path.every({
                        "useAssistPresence.useMemo": (pathSegment, i)=>{
                            const statusSegment = statusPath[i];
                            return typeof pathSegment == "string" ? pathSegment === statusSegment : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isKeySegment"])(pathSegment) && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isKeySegment"])(statusSegment) ? pathSegment._key === statusSegment._key : !1;
                        }
                    }["useAssistPresence.useMemo"]);
                }
            }["useAssistPresence.useMemo"]);
            return activePresence?.length ? activePresence.map({
                "useAssistPresence.useMemo": (status)=>aiPresence(status, path)
            }["useAssistPresence.useMemo"]) : NO_PRESENCE;
        }
    }["useAssistPresence.useMemo"], [
        showFocusWithin,
        tasks,
        path
    ]);
}
function aiPresence(presence, path, title) {
    return {
        user: {
            id: `sanity-assistant_${presence._key}`,
            displayName: pluginTitle
        },
        path,
        sessionId: "not-available",
        lastActiveAt: presence?.started ?? /* @__PURE__ */ new Date().toISOString()
    };
}
function AssistFieldWrapper(props) {
    const { schemaType } = props;
    return !(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistFieldWrapper.useMemo": ()=>isAssistSupported(schemaType)
    }["AssistFieldWrapper.useMemo"], [
        schemaType
    ]) || schemaType.name.startsWith("sanity.") || schemaType.name === contextDocumentTypeName ? props.renderDefault(props) : !isType(props.schemaType, "document") && props.inputId !== "root" && props.inputId !== assistFormId ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistField, {
        ...props,
        children: props.children
    }) : props.renderDefault(props);
}
function AssistField(props) {
    const { path } = props, isPortableText = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistField.useMemo[isPortableText]": ()=>!!((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isArraySchemaType"])(props.schemaType) && isPortableTextArray(props.schemaType))
    }["AssistField.useMemo[isPortableText]"], [
        props.schemaType
    ]), presence = useAssistPresence(props.path, isPortableText), firstAssistedPath = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(FirstAssistedPathContext), isFirstAssisted = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistField.useMemo[isFirstAssisted]": ()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(path) === firstAssistedPath
    }["AssistField.useMemo[isFirstAssisted]"], [
        path,
        firstAssistedPath
    ]), { showOnboarding, dismissOnboarding } = useOnboardingFeature(fieldOnboardingKey), singlePresence = presence[0], actions = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        gap: 2,
        align: "center",
        justify: "space-between",
        children: [
            singlePresence && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AiFieldPresence, {
                    presence: singlePresence
                })
            }),
            isFirstAssisted && showOnboarding && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistOnboardingPopover, {
                dismiss: dismissOnboarding
            })
        ]
    });
    return props.renderDefault({
        ...props,
        // When showing the onboarding, prevent default field actions from being rendered
        actions: isFirstAssisted && showOnboarding ? [] : props.actions,
        // Render presence (and possibly onboarding) in the internal slot (between presence and the field actions)
        // eslint-disable-next-line camelcase
        __internal_slot: actions
    });
}
const WrapPreCard = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"])`
  & pre {
    white-space: pre-wrap !important;
  }
`;
function SafeValueInput(props) {
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ErrorWrapper, {
        onChange: props.onChange,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(PteValueFixer, {
            ...props
        })
    });
}
function ErrorWrapper(props) {
    const { onChange } = props, [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(), catchError2 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "ErrorWrapper.useCallback[catchError2]": (params)=>{
            setError(params.error);
        }
    }["ErrorWrapper.useCallback[catchError2]"], []), unsetValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "ErrorWrapper.useCallback[unsetValue]": ()=>{
            onChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["unset"])())), setError(void 0);
        }
    }["ErrorWrapper.useCallback[unsetValue]"], [
        onChange
    ]), dismiss = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "ErrorWrapper.useCallback[dismiss]": ()=>setError(void 0)
    }["ErrorWrapper.useCallback[dismiss]"], []), catcher = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["ErrorBoundary"], {
        onCatch: catchError2,
        children: props.children
    });
    return error ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        border: !0,
        tone: "critical",
        padding: 2,
        contentEditable: !1,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
            space: 3,
            children: [
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                    muted: !0,
                    weight: "semibold",
                    children: "An error occurred."
                }),
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(WrapPreCard, {
                    flex: 1,
                    padding: 2,
                    tone: "critical",
                    border: !0,
                    children: catcher
                }),
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    width: "fill",
                    flex: 1,
                    gap: 3,
                    children: [
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            flex: 1,
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                text: "Dismiss",
                                onClick: dismiss,
                                tone: "primary"
                            })
                        }),
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                            text: "Unset value",
                            onClick: unsetValue,
                            tone: "critical"
                        })
                    ]
                })
            ]
        })
    }) : catcher;
}
function PteValueFixer(props) {
    const isPortableText = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "PteValueFixer.useMemo[isPortableText]": ()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isArraySchemaType"])(props.schemaType) && isPortableTextArray(props.schemaType)
    }["PteValueFixer.useMemo[isPortableText]"], [
        props.schemaType
    ]), value = props.value;
    return isPortableText && value && !value.length ? props.renderDefault({
        ...props,
        value: void 0
    }) : props.renderDefault(props);
}
function AssistFormBlock(props) {
    const presence = useAssistPresence(props.path, !0), { onChange } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useFormCallbacks"])(), key = props.value._key, localOnChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "AssistFormBlock.useCallback[localOnChange]": (patchEvent)=>{
            key && onChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from(patchEvent).prefixAll({
                _key: key
            }));
        }
    }["AssistFormBlock.useCallback[localOnChange]"], [
        onChange,
        key
    ]), singlePresence = presence[0];
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ErrorWrapper, {
        onChange: localOnChange,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
            align: "center",
            justify: "space-between",
            children: [
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                    flex: 1,
                    children: props.renderDefault(props)
                }),
                singlePresence && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AiFieldPresence, {
                    presence: singlePresence
                })
            ]
        })
    });
}
const InlineBlockValueContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])(void 0);
function AssistInlineFormBlock(props) {
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(InlineBlockValueContext.Provider, {
        value: props.value,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
            children: props.renderDefault(props)
        })
    });
}
function AssistItem(props) {
    const { path } = props, presence = useAssistPresence(path, !0);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        align: "center",
        width: "fill",
        style: {
            position: "relative"
        },
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                flex: 1,
                children: props.renderDefault({
                    ...props
                })
            }),
            presence.map((pre)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                    style: {
                        position: "absolute",
                        right: 35
                    },
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AiFieldPresence, {
                        presence: pre
                    })
                }, pre.user.id))
        ]
    });
}
const preventDefault = (ev)=>ev.preventDefault();
function DocumentForm(props) {
    const { collapsedFieldSets, collapsedPaths, displayed: value, documentId, documentType, editState, formState, onBlur, onChange, onFocus, onPathOpen, onSetActiveFieldGroup, onSetCollapsedFieldSet, onSetCollapsedPath, ready, validation } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDocumentPane"])(), documentStore = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useDocumentStore"])(), presence = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useDocumentPresence"])(documentId), patchChannel = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "DocumentForm.useMemo[patchChannel]": ()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["createPatchChannel"])()
    }["DocumentForm.useMemo[patchChannel]"], []), isLocked = editState?.transactionSyncLock?.enabled;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "DocumentForm.useEffect": ()=>{
            const sub = documentStore.pair.documentEvents(documentId, documentType).pipe((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$tap$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tap"])({
                "DocumentForm.useEffect.sub": (event)=>{
                    event.type === "mutation" && patchChannel.publish(prepareMutationEvent(event)), event.type === "rebase" && patchChannel.publish(prepareRebaseEvent(event));
                }
            }["DocumentForm.useEffect.sub"])).subscribe();
            return ({
                "DocumentForm.useEffect": ()=>{
                    sub.unsubscribe();
                }
            })["DocumentForm.useEffect"];
        }
    }["DocumentForm.useEffect"], [
        documentId,
        documentStore,
        documentType,
        patchChannel
    ]);
    const hasRev = !!value?._rev;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "DocumentForm.useEffect": ()=>{
            hasRev && patchChannel.publish({
                type: "mutation",
                patches: [],
                snapshot: value
            });
        }
    }["DocumentForm.useEffect"], [
        hasRev
    ]);
    const formRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "DocumentForm.useEffect": ()=>{
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["focusFirstDescendant"])(formRef.current);
        }
    }["DocumentForm.useEffect"], []), isLocked ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
        as: "form",
        ...props,
        ref: formRef,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
            align: "center",
            direction: "column",
            height: "fill",
            justify: "center",
            padding: 3,
            sizing: "border",
            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                size: 1,
                children: "Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn\u2019t take more than a few seconds"
            })
        })
    }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
        as: "form",
        ...props,
        onSubmit: preventDefault,
        ref: formRef,
        children: ready ? formState === null ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
            align: "center",
            direction: "column",
            height: "fill",
            justify: "center",
            padding: 3,
            sizing: "border",
            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                size: 1,
                children: "This form is hidden"
            })
        }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["FormBuilder"], {
            __internal_patchChannel: patchChannel,
            collapsedFieldSets,
            collapsedPaths,
            focusPath: formState.focusPath,
            changed: formState.changed,
            focused: formState.focused,
            groups: formState.groups,
            id: assistFormId,
            members: formState.members,
            onChange,
            onFieldGroupSelect: onSetActiveFieldGroup,
            onPathBlur: onBlur,
            onPathFocus: onFocus,
            onPathOpen,
            onSetFieldSetCollapsed: onSetCollapsedFieldSet,
            onSetPathCollapsed: onSetCollapsedPath,
            presence,
            readOnly: formState.readOnly,
            schemaType: formState.schemaType,
            validation,
            value: formState.value
        }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
            align: "center",
            direction: "column",
            height: "fill",
            justify: "center",
            padding: 3,
            sizing: "border",
            children: [
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {
                    muted: !0
                }),
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                    marginTop: 3,
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        align: "center",
                        muted: !0,
                        size: 1,
                        children: "Loading document"
                    })
                })
            ]
        })
    });
}
function prepareMutationEvent(event) {
    const patches = event.mutations.map((mut)=>mut.patch).filter(Boolean);
    return {
        type: "mutation",
        snapshot: event.document,
        patches: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fromMutationPatches"])(event.origin, patches)
    };
}
function prepareRebaseEvent(event) {
    const remotePatches = event.remoteMutations.map((mut)=>mut.patch).filter(Boolean), localPatches = event.localMutations.map((mut)=>mut.patch).filter(Boolean);
    return {
        type: "rebase",
        snapshot: event.document,
        patches: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fromMutationPatches"])("remote", remotePatches).concat((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fromMutationPatches"])("local", localPatches))
    };
}
const AssistTypeContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])({}), DEFAULT_MAX_DEPTH$1 = 8, ABSOLUTE_MAX_DEPTH$1 = 50;
function getConditionalMembers(docState, maxDepth2 = DEFAULT_MAX_DEPTH$1) {
    return [
        {
            path: "",
            hidden: !1,
            readOnly: !!docState.readOnly,
            conditional: isConditional(docState.schemaType)
        },
        ...extractConditionalPaths(docState, Math.min(maxDepth2, ABSOLUTE_MAX_DEPTH$1))
    ].filter((v)=>v.conditional).map(({ conditional, ...state })=>({
            ...state
        }));
}
function isConditional(schemaType) {
    return typeof schemaType.hidden == "function" || typeof schemaType.readOnly == "function";
}
function conditionalState(memberState) {
    return {
        path: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(memberState.path),
        readOnly: !!memberState.readOnly,
        hidden: !1,
        // if its in members, its not hidden
        conditional: isConditional(memberState.schemaType)
    };
}
function extractConditionalPaths(node, maxDepth2) {
    return node.path.length >= maxDepth2 ? [] : node.members.reduce((acc, member)=>{
        if (member.kind === "error") return acc;
        if (member.kind === "field") {
            const schemaType = member.field.schemaType;
            if (schemaType.jsonType === "object") {
                const innerFields = member.field.readOnly ? [] : extractConditionalPaths(member.field, maxDepth2);
                return [
                    ...acc,
                    conditionalState(member.field),
                    ...innerFields
                ];
            } else if (schemaType.jsonType === "array") {
                const array = member.field;
                let arrayPaths = [];
                const isObjectsArray = array.members.some((m)=>m.kind === "item" && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isObjectSchemaType"])(m.item.schemaType));
                if (!array.readOnly) for (const arrayMember of array.members){
                    if (arrayMember.kind === "error") continue;
                    const innerFields = isObjectsArray && !arrayMember.item.readOnly ? extractConditionalPaths(arrayMember.item, maxDepth2) : [];
                    arrayPaths = [
                        ...arrayPaths,
                        conditionalState(arrayMember.item),
                        ...innerFields
                    ];
                }
                return [
                    ...acc,
                    conditionalState(array),
                    ...arrayPaths
                ];
            }
            return [
                ...acc,
                conditionalState(member.field)
            ];
        } else if (member.kind === "fieldSet") {
            const conditionalFieldset = !!node.schemaType?.fieldsets?.some((f)=>!f.single && f.name === member.fieldSet.name && typeof f.hidden == "function"), innerFields = extractConditionalPaths(member.fieldSet, maxDepth2).map((f)=>({
                    ...f,
                    // if fieldset is conditional, visible fields must also be considered conditional
                    conditional: conditionalFieldset ?? f.conditional
                }));
            return [
                ...acc,
                ...innerFields
            ];
        }
        return acc;
    }, []);
}
const SparklesIllustration = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SparklesIcon"])({
    fontSize: "3.125em",
    "& path": {
        strokeWidth: "0.6px !important"
    }
});
function InspectorOnboarding(props) {
    const { onDismiss } = props;
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
        padding: 4,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Container"], {
            width: 0,
            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                space: 4,
                children: [
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("div", {
                        style: {
                            textAlign: "center"
                        },
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(SparklesIllustration, {})
                    }),
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        align: "center",
                        size: 1,
                        children: "Create reusable AI instructions that can be applied across all documents of a certain type."
                    }),
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                        align: "center",
                        gap: 2,
                        justify: "center",
                        children: [
                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                as: "a",
                                href: releaseAnnouncementUrl,
                                rel: "noreferrer",
                                target: "_blank",
                                fontSize: 1,
                                mode: "default",
                                onClick: onDismiss,
                                padding: 2,
                                text: "Learn more",
                                tone: "primary"
                            }),
                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                fontSize: 1,
                                mode: "bleed",
                                onClick: onDismiss,
                                padding: 2,
                                text: "Dismiss"
                            })
                        ]
                    })
                ]
            })
        })
    });
}
function FieldAutocomplete(props) {
    const { id, schemaType, fieldPath, onSelect, includeDocument, filter: filter2 } = props, fieldRefs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "FieldAutocomplete.useMemo[fieldRefs]": ()=>includeDocument ? getFieldRefsWithDocument(schemaType) : getFieldRefs(schemaType)
    }["FieldAutocomplete.useMemo[fieldRefs]"], [
        schemaType,
        includeDocument
    ]), currentField = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "FieldAutocomplete.useMemo[currentField]": ()=>fieldRefs.find({
                "FieldAutocomplete.useMemo[currentField]": (f)=>f.key === fieldPath
            }["FieldAutocomplete.useMemo[currentField]"])
    }["FieldAutocomplete.useMemo[currentField]"], [
        fieldPath,
        fieldRefs
    ]), autocompleteOptions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "FieldAutocomplete.useMemo[autocompleteOptions]": ()=>fieldRefs.filter({
                "FieldAutocomplete.useMemo[autocompleteOptions]": (field)=>filter2 ? filter2(field) : !0
            }["FieldAutocomplete.useMemo[autocompleteOptions]"]).filter({
                "FieldAutocomplete.useMemo[autocompleteOptions]": (f)=>!isType(f.schemaType, "reference")
            }["FieldAutocomplete.useMemo[autocompleteOptions]"]).map({
                "FieldAutocomplete.useMemo[autocompleteOptions]": (field)=>({
                        value: field.key,
                        field
                    })
            }["FieldAutocomplete.useMemo[autocompleteOptions]"])
    }["FieldAutocomplete.useMemo[autocompleteOptions]"], [
        fieldRefs,
        filter2
    ]), renderOption = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldAutocomplete.useCallback[renderOption]": (option)=>{
            const { value, field } = option;
            return value ? isType(field.schemaType, "document") ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
                as: "button",
                padding: 3,
                radius: 1,
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                    size: 1,
                    weight: "semibold",
                    children: "The entire document"
                })
            }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
                as: "button",
                padding: 3,
                radius: 1,
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    gap: 3,
                    children: [
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                            size: 1,
                            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createElement"])(field.icon)
                        }),
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FieldTitle, {
                            field
                        })
                    ]
                })
            }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
                as: "button",
                padding: 3,
                radius: 1,
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                    accent: !0,
                    size: 1,
                    children: option.value
                })
            });
        }
    }["FieldAutocomplete.useCallback[renderOption]"], []), renderValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldAutocomplete.useCallback[renderValue]": (value, option)=>option?.field.title ?? value
    }["FieldAutocomplete.useCallback[renderValue]"], []), filterOption = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldAutocomplete.useCallback[filterOption]": (query, option)=>{
            const lQuery = query.toLowerCase();
            return option?.value?.toLowerCase().includes(lQuery) || option?.field?.title?.toLowerCase().includes(lQuery);
        }
    }["FieldAutocomplete.useCallback[filterOption]"], []);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Autocomplete"], {
        fontSize: 1,
        icon: currentField ? currentField.icon : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SearchIcon"],
        onChange: onSelect,
        openButton: !0,
        id,
        options: autocompleteOptions,
        placeholder: "Search for a field",
        radius: 2,
        renderOption,
        renderValue,
        value: currentField?.key,
        filterOption
    });
}
function FieldTitle(props) {
    const splitTitle = props.field.title.split("/");
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
        flex: "none",
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Breadcrumbs"], {
            style: {
                display: "flex",
                flexWrap: "wrap",
                alignItems: "center",
                marginTop: "-4px"
            },
            separator: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                marginTop: 1,
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                    muted: !0,
                    size: 1,
                    children: "/"
                })
            }),
            space: 1,
            children: [
                splitTitle.slice(0, splitTitle.length - 1).map((pt, i)=>// eslint-disable-next-line react/no-array-index-key
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                        marginTop: 1,
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                            muted: !0,
                            size: 1,
                            children: pt.trim()
                        })
                    }, i)),
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                    marginTop: 1,
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        size: 1,
                        weight: "medium",
                        children: splitTitle[splitTitle.length - 1]
                    })
                })
            ]
        })
    });
}
function useInterval(ms) {
    const [tick, update] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useReducer"])({
        "useInterval.useReducer": (n)=>n + 1
    }["useInterval.useReducer"], 0);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useInterval.useEffect": ()=>{
            const i = setInterval(update, ms);
            return ({
                "useInterval.useEffect": ()=>clearInterval(i)
            })["useInterval.useEffect"];
        }
    }["useInterval.useEffect"], [
        ms
    ]), tick;
}
function TimeAgo({ date }) {
    useInterval(1e3);
    const timeSince = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$assist$2f$node_modules$2f$date$2d$fns$2f$formatDistanceToNow$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["formatDistanceToNow"])(date ? new Date(date) : /* @__PURE__ */ new Date());
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])("span", {
        title: timeSince,
        children: [
            timeSince,
            " ago"
        ]
    });
}
const rotate = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["keyframes"]`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`, SyncSpinningIcon = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SyncIcon"])`
  animation: ${rotate} 1s linear infinite;
`, TASK_CONFIG = {
    aborted: {
        title: "Canceled",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CloseCircleIcon"],
        tone: "transparent"
    },
    error: {
        title: "Error",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ErrorOutlineIcon"],
        tone: "critical"
    },
    success: {
        title: "Completed",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CheckmarkCircleIcon"],
        tone: "positive"
    },
    timeout: {
        title: "Timeout",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ClockIcon"],
        tone: "caution"
    }
};
function InstructionTaskHistoryButton(props) {
    const { tasks, instructions, documentId, showTitles } = props, client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useClient"])({
        apiVersion: "2023-01-01"
    }), cancelRun = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "InstructionTaskHistoryButton.useCallback[cancelRun]": (taskKey)=>{
            if (!documentId) return;
            const statusDocId = assistTasksStatusId(documentId), basePath2 = `${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])("tasks")}[_key=="${taskKey}"]`;
            client.patch(statusDocId).set({
                [`${basePath2}.${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])("ended")}`]: /* @__PURE__ */ new Date().toISOString(),
                [`${basePath2}.${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])("reason")}`]: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])("aborted")
            }).commit().catch(console.error);
        }
    }["InstructionTaskHistoryButton.useCallback[cancelRun]"], [
        client,
        documentId
    ]), titledTasks = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "InstructionTaskHistoryButton.useMemo[titledTasks]": ()=>{
            const t = tasks?.filter({
                "InstructionTaskHistoryButton.useMemo[titledTasks]": (task)=>task.started && /* @__PURE__ */ new Date().getTime() - new Date(task.started).getTime() < maxHistoryVisibilityMs
            }["InstructionTaskHistoryButton.useMemo[titledTasks]"]).map({
                "InstructionTaskHistoryButton.useMemo[titledTasks]": (task)=>{
                    const instruction2 = instructions?.find({
                        "InstructionTaskHistoryButton.useMemo[titledTasks]": (i)=>i._key === task.instructionKey
                    }["InstructionTaskHistoryButton.useMemo[titledTasks]"]);
                    return {
                        ...task,
                        title: showTitles ? task.title ?? getInstructionTitle(instruction2) : void 0,
                        cancel: ({
                            "InstructionTaskHistoryButton.useMemo[titledTasks]": ()=>cancelRun(task._key)
                        })["InstructionTaskHistoryButton.useMemo[titledTasks]"]
                    };
                }
            }["InstructionTaskHistoryButton.useMemo[titledTasks]"]) ?? [];
            return t.sort({
                "InstructionTaskHistoryButton.useMemo[titledTasks]": (a, b)=>new Date(b.started ?? "").getTime() - new Date(a.started ?? "").getTime()
            }["InstructionTaskHistoryButton.useMemo[titledTasks]"]), t;
        }
    }["InstructionTaskHistoryButton.useMemo[titledTasks]"], [
        tasks,
        instructions,
        cancelRun,
        showTitles
    ]), isRunning = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "InstructionTaskHistoryButton.useMemo[isRunning]": ()=>titledTasks.some({
                "InstructionTaskHistoryButton.useMemo[isRunning]": (r)=>!r.ended
            }["InstructionTaskHistoryButton.useMemo[isRunning]"])
    }["InstructionTaskHistoryButton.useMemo[isRunning]"], [
        titledTasks
    ]), hasErrors = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "InstructionTaskHistoryButton.useMemo[hasErrors]": ()=>titledTasks.some({
                "InstructionTaskHistoryButton.useMemo[hasErrors]": (r)=>r.reason === "error" || r.reason === "timeout"
            }["InstructionTaskHistoryButton.useMemo[hasErrors]"])
    }["InstructionTaskHistoryButton.useMemo[hasErrors]"], [
        titledTasks
    ]), [open, setOpen] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1), toggleOpen = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "InstructionTaskHistoryButton.useCallback[toggleOpen]": ()=>setOpen({
                "InstructionTaskHistoryButton.useCallback[toggleOpen]": (v)=>!v
            }["InstructionTaskHistoryButton.useCallback[toggleOpen]"])
    }["InstructionTaskHistoryButton.useCallback[toggleOpen]"], []), [button, setButton] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null), [popover, setPopover] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null), handleClickOutside = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "InstructionTaskHistoryButton.useCallback[handleClickOutside]": ()=>{
            setOpen(!1);
        }
    }["InstructionTaskHistoryButton.useCallback[handleClickOutside]"], []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useClickOutside"])(handleClickOutside, [
        button,
        popover
    ]);
    const handleEscape = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "InstructionTaskHistoryButton.useCallback[handleEscape]": ()=>{
            setOpen(!1), button?.focus();
        }
    }["InstructionTaskHistoryButton.useCallback[handleEscape]"], [
        button
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Popover"], {
        constrainSize: !0,
        content: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(TaskList, {
            onEscape: handleEscape,
            tasks: titledTasks
        }),
        open: open && !!titledTasks?.length,
        placement: "top",
        portal: !0,
        ref: setPopover,
        width: 0,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(TaskStatusButton, {
            disabled: !titledTasks?.length,
            hasErrors,
            isRunning,
            onClick: toggleOpen,
            ref: setButton,
            selected: open
        })
    });
}
const TASK_STATUS_BUTTON_TOOLTIP_PROPS = {
    placement: "top"
}, TaskStatusButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"])(function(props, ref) {
    const { disabled, hasErrors, isRunning, onClick, selected } = props;
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["StatusButton"], {
        label: `${pluginTitle} status`,
        "aria-label": `${pluginTitle} status`,
        icon: isRunning ? SyncSpinningIcon : hasErrors ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ErrorOutlineIcon"] : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CheckmarkCircleIcon"],
        mode: "bleed",
        onClick,
        tone: hasErrors ? "critical" : void 0,
        disabled,
        ref,
        selected,
        tooltipProps: TASK_STATUS_BUTTON_TOOLTIP_PROPS
    });
});
function TaskList(props) {
    const { onEscape, tasks } = props, { isTopLayer } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useLayer"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useGlobalKeyDown"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "TaskList.useGlobalKeyDown.useCallback": (event)=>{
            isTopLayer && event.key === "Escape" && onEscape();
        }
    }["TaskList.useGlobalKeyDown.useCallback"], [
        isTopLayer,
        onEscape
    ])), /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
        padding: 1,
        space: 1,
        children: tasks.map((task)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(TaskItem, {
                task
            }, task._key))
    });
}
function TaskItem(props) {
    const { task } = props, taskType = task.reason && TASK_CONFIG[task.reason];
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        radius: 2,
        tone: taskType && taskType?.tone,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
            align: "center",
            gap: 1,
            children: [
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    align: "flex-start",
                    flex: 1,
                    gap: 3,
                    padding: 3,
                    children: [
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            flex: "none",
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                size: 1,
                                children: [
                                    taskType && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createElement"])(taskType.icon),
                                    !task.reason && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {})
                                ]
                            })
                        }),
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                            flex: 1,
                            space: 2,
                            children: [
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                    size: 1,
                                    weight: "medium",
                                    children: [
                                        taskType ? taskType.title : "Running",
                                        task.title && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                                            children: [
                                                ": ",
                                                task.title
                                            ]
                                        })
                                    ]
                                }),
                                task.message ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                    size: 1,
                                    children: task.message
                                }) : null,
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                    muted: !0,
                                    size: 1,
                                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(TimeAgo, {
                                        date: task.ended ?? task.started
                                    })
                                })
                            ]
                        })
                    ]
                }),
                !task.ended && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                    flex: "none",
                    padding: 1,
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                        fontSize: 1,
                        mode: "bleed",
                        onClick: task.cancel,
                        text: "Cancel"
                    })
                })
            ]
        })
    });
}
const CardWithShadowBelow = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"])`
  position: relative;

  &:after {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    right: 0;
    bottom: -1px;
    border-bottom: 1px solid var(--card-border-color);
    opacity: 0.5;
    z-index: 100;
  }
`, CardWithShadowAbove = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"])`
  position: relative;

  &:after {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    right: 0;
    top: -1px;
    border-top: 1px solid var(--card-border-color);
    opacity: 0.5;
    z-index: 100;
  }
`;
function AssistInspectorWrapper(props) {
    const context = useAiAssistanceConfig();
    if (context.statusLoading) return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        align: "center",
        height: "fill",
        justify: "center",
        padding: 4,
        sizing: "border",
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
            space: 3,
            style: {
                textAlign: "center"
            },
            children: [
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {
                    muted: !0
                }),
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                    muted: !0,
                    size: 1,
                    children: [
                        "Loading ",
                        pluginTitle,
                        "..."
                    ]
                })
            ]
        })
    });
    const status = context.status;
    return status?.enabled ? !status?.initialized || !status.validToken ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        direction: "column",
        height: "fill",
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DocumentInspectorHeader"], {
                closeButtonLabel: "Close",
                onClose: props.onClose,
                title: pluginTitle
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                padding: 4,
                space: 3,
                children: [
                    context.error ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        size: 1,
                        weight: "semibold",
                        children: [
                            "Failed to start ",
                            pluginTitle
                        ]
                    }) : null,
                    !context.error && !status?.initialized ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        size: 1,
                        weight: "semibold",
                        children: [
                            pluginTitle,
                            " is not enabled"
                        ]
                    }) : null,
                    !context.error && status?.initialized && !status.validToken ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                        children: [
                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                size: 1,
                                weight: "semibold",
                                children: "Invalid token"
                            }),
                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                muted: !0,
                                size: 1,
                                children: "The token used by the AI Assistant is not valid and has to be regenerated."
                            })
                        ]
                    }) : null,
                    context.error && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        muted: !0,
                        size: 1,
                        children: "Something went wrong. See console for details."
                    }),
                    !context.error && !status?.initialized && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        size: 1,
                        muted: !0,
                        children: [
                            "Please enable ",
                            pluginTitle,
                            "."
                        ]
                    }),
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                        fontSize: 1,
                        icon: context.initLoading ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            marginTop: 1,
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {})
                        }) : context.error ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["RetryIcon"] : void 0,
                        text: context.error ? "Retry" : status?.initialized && !status.validToken ? `Restore ${pluginTitle}` : `Enable ${pluginTitle} now`,
                        tone: "primary",
                        onClick: context.init,
                        disabled: context.initLoading
                    })
                ]
            })
        ]
    }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistInspector, {
        ...props
    }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        direction: "column",
        height: "fill",
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DocumentInspectorHeader"], {
                closeButtonLabel: "Close",
                onClose: props.onClose,
                title: pluginTitle
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                flex: 1,
                overflow: "auto",
                padding: 4,
                space: 3,
                children: [
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        as: "p",
                        size: 1,
                        weight: "semibold",
                        children: [
                            pluginTitle,
                            " is not available"
                        ]
                    }),
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        as: "p",
                        muted: !0,
                        size: 1,
                        children: [
                            "Please get in touch with a Sanity account manager or",
                            " ",
                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("a", {
                                href: salesUrl,
                                target: "_blank",
                                rel: "noreferrer",
                                children: "contact our sales team"
                            }),
                            " ",
                            "to get started with ",
                            pluginTitle,
                            ".",
                            " ",
                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("a", {
                                href: releaseAnnouncementUrl,
                                target: "_blank",
                                rel: "noreferrer",
                                children: "Learn more \u2192"
                            })
                        ]
                    })
                ]
            })
        ]
    });
}
function AssistInspector(props) {
    const { params } = useAiPaneRouter(), boundary = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null), pathKey = params?.[fieldPathParam], instructionKey = params?.[instructionParam], documentPane = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDocumentPane"])(), { documentId, documentType, value: docValue, schemaType, onChange: documentOnChange, formState } = documentPane, { assistableDocumentId, documentIsAssistable } = useAssistDocumentContext(), formStateRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(formState);
    formStateRef.current = formState;
    const { instructionLoading, requestRunInstruction } = useRequestRunInstruction({
        documentOnChange,
        isDocAssistable: documentIsAssistable
    }), typePath = useTypePath(docValue, pathKey ?? ""), selectedField = useSelectedField(schemaType, typePath), aiDocId = assistDocumentId(documentType), assistDocument = useStudioAssistDocument({
        documentId,
        schemaType,
        initDoc: !0
    }), instruction2 = assistDocument?.fields?.find((f)=>f.path === typePath)?.instructions?.find((i)=>i._key === instructionKey), tasks = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistInspector.useMemo[tasks]": ()=>assistDocument?.tasks?.filter({
                "AssistInspector.useMemo[tasks]": (i)=>!instructionKey || i.instructionKey === instructionKey
            }["AssistInspector.useMemo[tasks]"])
    }["AssistInspector.useMemo[tasks]"], [
        assistDocument?.tasks,
        instructionKey
    ]), instructions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistInspector.useMemo[instructions]": ()=>assistDocument?.fields?.flatMap({
                "AssistInspector.useMemo[instructions]": (f)=>f.instructions ?? []
            }["AssistInspector.useMemo[instructions]"])
    }["AssistInspector.useMemo[instructions]"], [
        assistDocument?.fields
    ]), promptValue = instruction2?.prompt, isEmptyPrompt = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistInspector.useMemo[isEmptyPrompt]": ()=>{
            if (!promptValue?.length) return !0;
            const children = promptValue[0]?.children;
            return promptValue.length == 1 && children?.length === 1 && !children?.[0]?.text?.length;
        }
    }["AssistInspector.useMemo[isEmptyPrompt]"], [
        promptValue
    ]), paneNode = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistInspector.useMemo[paneNode]": ()=>({
                type: "document",
                id: aiDocId,
                title: pluginTitle,
                options: {
                    id: aiDocId,
                    type: assistDocumentTypeName
                }
            })
    }["AssistInspector.useMemo[paneNode]"], [
        aiDocId
    ]), runCurrentInstruction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "AssistInspector.useCallback[runCurrentInstruction]": ()=>instruction2 && pathKey && typePath && requestRunInstruction({
                documentId: assistableDocumentId,
                path: pathKey,
                typePath,
                assistDocumentId: assistDocumentId(documentType),
                instruction: instruction2,
                conditionalMembers: formStateRef.current ? getConditionalMembers(formStateRef.current) : []
            })
    }["AssistInspector.useCallback[runCurrentInstruction]"], [
        pathKey,
        instruction2,
        typePath,
        documentType,
        assistableDocumentId,
        requestRunInstruction
    ]), Region = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "AssistInspector.useCallback[Region]": (_props)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("div", {
                ..._props,
                style: {
                    height: "100%",
                    flex: 1,
                    overflow: "auto"
                }
            })
    }["AssistInspector.useCallback[Region]"], []), assistTypeContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistInspector.useMemo[assistTypeContext]": ()=>({
                typePath,
                documentType
            })
    }["AssistInspector.useMemo[assistTypeContext]"], [
        typePath,
        documentType
    ]);
    return !documentId || !schemaType || schemaType.jsonType !== "object" ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        flex: 1,
        padding: 4,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
            children: "Document not ready yet."
        })
    }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        ref: boundary,
        direction: "column",
        height: "fill",
        overflow: "hidden",
        sizing: "border",
        style: {
            lineHeight: 0
        },
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AiInspectorHeader, {
                onClose: props.onClose,
                field: selectedField,
                fieldTitle: getFieldTitle(selectedField)
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
                as: Region,
                flex: 1,
                overflow: "auto",
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    direction: "column",
                    style: {
                        minHeight: "100%"
                    },
                    children: [
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            flex: 1,
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PresenceOverlay"], {
                                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                                    padding: 4,
                                    children: selectedField && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistTypeContext.Provider, {
                                        value: assistTypeContext,
                                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["VirtualizerScrollInstanceProvider"], {
                                            scrollElement: boundary.current,
                                            containerElement: boundary,
                                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__DocumentPaneProviderWrapper__as__DocumentPaneProvider$3e$__["DocumentPaneProvider"], {
                                                paneKey: documentPane.paneKey,
                                                index: documentPane.index,
                                                itemId: "ai",
                                                pane: paneNode,
                                                forcedVersion: {
                                                    isReleaseLocked: !1,
                                                    selectedPerspectiveName: "published",
                                                    selectedReleaseId: void 0
                                                },
                                                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(DocumentForm, {})
                                            })
                                        })
                                    })
                                })
                            })
                        }),
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            flex: "none",
                            padding: 4,
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                muted: !0,
                                size: 1,
                                children: [
                                    "How is Sanity AI Assist working for you?",
                                    " ",
                                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])("a", {
                                        href: giveFeedbackUrl,
                                        target: "_blank",
                                        rel: "noreferrer",
                                        style: {
                                            whiteSpace: "nowrap"
                                        },
                                        children: [
                                            "Let us know ",
                                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ArrowRightIcon"], {})
                                        ]
                                    })
                                ]
                            })
                        })
                    ]
                })
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(CardWithShadowAbove, {
                flex: "none",
                paddingX: 4,
                paddingY: 3,
                style: {
                    justifySelf: "flex-end"
                },
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    gap: 2,
                    flex: 1,
                    justify: "flex-end",
                    children: [
                        schemaType?.name && pathKey && instructionKey && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                            flex: 1,
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                mode: "ghost",
                                disabled: isEmptyPrompt || instructionLoading,
                                fontSize: 1,
                                icon: instructionLoading ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {}) : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PlayIcon"],
                                onClick: runCurrentInstruction,
                                padding: 3,
                                text: "Run instruction"
                            })
                        }),
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(InstructionTaskHistoryButton, {
                            documentId: assistableDocumentId,
                            tasks,
                            instructions,
                            showTitles: !instructionKey
                        })
                    ]
                })
            })
        ]
    });
}
function AiInspectorHeader(props) {
    const { onClose, field, fieldTitle } = props, { showOnboarding, dismissOnboarding } = useOnboardingFeature(inspectorOnboardingKey);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(CardWithShadowBelow, {
        flex: "none",
        padding: 2,
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                flex: 1,
                align: "center",
                children: [
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                        flex: 1,
                        padding: 3,
                        gap: 2,
                        align: "center",
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                            gap: 1,
                            align: "center",
                            wrap: "wrap",
                            style: {
                                marginTop: "-4px"
                            },
                            children: [
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                                    marginTop: 1,
                                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                        size: 1,
                                        weight: "semibold",
                                        children: "AI instructions for"
                                    })
                                }),
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
                                    radius: 2,
                                    border: !0,
                                    padding: 1,
                                    marginTop: 1,
                                    children: field ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FieldTitle, {
                                        field
                                    }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                        size: 1,
                                        weight: "semibold",
                                        children: fieldTitle
                                    })
                                })
                            ]
                        })
                    }),
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                        flex: "none",
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                            fontSize: 1,
                            icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CloseIcon"],
                            mode: "bleed",
                            onClick: onClose
                        })
                    })
                ]
            }),
            showOnboarding && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(InspectorOnboarding, {
                onDismiss: dismissOnboarding
            })
        ]
    });
}
const aiInspectorId = "ai-assistance", assistInspector = {
    name: aiInspectorId,
    useMenuItem: ()=>({
            icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SparklesIcon"],
            title: pluginTitle,
            hidden: !0,
            showAsAction: !1
        }),
    component: AssistInspectorWrapper,
    onClose ({ params }) {
        return {
            params: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])({
                ...params,
                [fieldPathParam]: void 0,
                [instructionParam]: void 0
            })
        };
    }
};
function arrowPath(options2, x, y, dir) {
    return [
        `M ${x - options2.arrow.size} ${y - options2.arrow.size * dir} `,
        `L ${x} ${y}`,
        `L ${x + options2.arrow.size} ${y - options2.arrow.size * dir}`
    ].join("");
}
function moveTo(x, y) {
    return `M${x} ${y}`;
}
function lineTo(x, y) {
    return `L${x} ${y}`;
}
function join(strings, delim = "") {
    return strings.join(delim);
}
function quadCurve(x1, y1, x, y) {
    return `Q${x1} ${y1} ${x} ${y}`;
}
function drawConnectorPath(options2, line) {
    const { cornerRadius } = options2.path, { from, to } = line, { x: fromX, y: fromY } = from, { x: _toX, y: toY } = to, toX = _toX - 1, dividerX = to.bounds.x + options2.divider.offsetX, fromPathX = from.isAbove || from.isBelow ? fromX + options2.arrow.marginX : fromX, r0 = Math.min(cornerRadius, Math.abs(fromPathX - dividerX) / 2), r1 = Math.min(cornerRadius, Math.abs(fromY - toY) / 2), cmds = [];
    return from.isAbove ? cmds.push(moveTo(fromX + options2.arrow.marginX, fromY - options2.arrow.threshold + options2.arrow.marginY), lineTo(fromX + options2.arrow.marginX, fromY - r0), quadCurve(fromX + options2.arrow.marginX, fromY, fromX + options2.arrow.marginX + r0, fromY)) : from.isBelow ? cmds.push(moveTo(fromX + options2.arrow.marginX, fromY + options2.arrow.threshold - options2.arrow.marginY), lineTo(fromX + options2.arrow.marginX, fromY + r0), quadCurve(fromX + options2.arrow.marginX, fromY, fromX + options2.arrow.marginX + r0, fromY)) : cmds.push(moveTo(fromX, fromY)), to.isAbove ? fromY < to.bounds.y ? cmds.push(lineTo(dividerX - r1, fromY), quadCurve(dividerX, fromY, dividerX, fromY + r1), lineTo(dividerX, toY - r1), quadCurve(dividerX, toY, dividerX + r1, toY), lineTo(dividerX - cornerRadius, toY), quadCurve(dividerX, toY, dividerX, toY - cornerRadius), lineTo(dividerX, toY - options2.arrow.threshold + options2.arrow.marginY)) : cmds.push(lineTo(dividerX - cornerRadius, fromY), quadCurve(dividerX, fromY, dividerX, fromY - cornerRadius), lineTo(dividerX, toY - options2.arrow.threshold + options2.arrow.marginY)) : to.isBelow ? fromY > to.bounds.y + to.bounds.h ? cmds.push(lineTo(dividerX - options2.arrow.marginX - r1, fromY), quadCurve(dividerX - options2.arrow.marginX, fromY, dividerX - options2.arrow.marginX, fromY - r1), lineTo(dividerX - options2.arrow.marginX, toY + r1), quadCurve(dividerX - options2.arrow.marginX, toY, dividerX - options2.arrow.marginX + r1, toY), lineTo(dividerX - cornerRadius, toY), quadCurve(dividerX, toY, dividerX, toY + cornerRadius), lineTo(dividerX, toY + options2.arrow.threshold - options2.arrow.marginY)) : cmds.push(lineTo(dividerX - cornerRadius, fromY), quadCurve(dividerX, fromY, dividerX, fromY + cornerRadius), lineTo(dividerX, toY + options2.arrow.threshold - options2.arrow.marginY)) : fromY < toY ? cmds.push(lineTo(dividerX - r0, fromY), quadCurve(dividerX, fromY, dividerX, fromY + r1), lineTo(dividerX, toY - r1), quadCurve(dividerX, toY, dividerX + r1, toY), lineTo(toX, toY)) : cmds.push(lineTo(dividerX - Math.min(r0, r1), fromY), quadCurve(dividerX, fromY, dividerX, fromY - Math.min(r0, r1)), lineTo(dividerX, toY + r1), quadCurve(dividerX, toY, dividerX + r1, toY), lineTo(toX, toY)), join(cmds);
}
function ConnectorPath(props) {
    const { from, options: options2, to } = props, { strokeWidth } = options2.path, theme = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTheme"])(), line = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "ConnectorPath.useMemo[line]": ()=>mapConnectorToLine(options2, {
                from,
                to
            })
    }["ConnectorPath.useMemo[line]"], [
        from,
        options2,
        to
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("path", {
                d: drawConnectorPath(options2, line),
                stroke: theme.sanity.color.base.bg,
                strokeWidth: strokeWidth + 4
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("path", {
                d: drawConnectorPath(options2, line),
                stroke: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["rgba"])(theme.sanity.color.base.border, 0.5),
                strokeWidth
            }),
            line.from.isAbove && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("path", {
                d: arrowPath(options2, line.from.x + options2.arrow.marginX, line.from.bounds.y - options2.arrow.threshold + options2.arrow.marginY, -1),
                stroke: theme.sanity.color.base.border,
                strokeWidth
            }),
            line.from.isBelow && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("path", {
                d: arrowPath(options2, line.from.x + options2.arrow.marginX, line.from.bounds.y + line.from.bounds.h + options2.arrow.threshold - options2.arrow.marginY, 1),
                stroke: theme.sanity.color.base.border,
                strokeWidth
            })
        ]
    });
}
const DEBUG = !1, options = {
    arrow: {
        marginX: 10.5,
        marginY: 5,
        size: 4,
        threshold: 16.5
    },
    divider: {
        offsetX: -10.5
    },
    path: {
        cornerRadius: 3,
        marginY: 10.5,
        strokeWidth: 1
    }
};
function AssistConnectorsOverlay(props) {
    const { connectors } = props, [, setRedraw] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "AssistConnectorsOverlay.useEffect": ()=>{
            setRedraw(!0);
        }
    }["AssistConnectorsOverlay.useEffect"], []), /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("svg", {
                fill: "none",
                width: window.innerWidth,
                height: window.innerHeight,
                style: {
                    position: "absolute",
                    top: 0,
                    left: 0,
                    width: "100%",
                    height: "100%",
                    pointerEvents: "none",
                    zIndex: 150
                },
                children: connectors.map((connector)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ConnectorPath, {
                        from: connector.from,
                        options,
                        to: connector.to
                    }, connector.key))
            }),
            DEBUG
        ]
    });
}
const getLanguageParams = (select, document2)=>{
    if (!select || !document2) return {};
    const selection = select || {}, selectedValue = {};
    for (const [key, path] of Object.entries(selection)){
        let value = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lodash$2d$es$2f$get$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__get$3e$__["get"])(document2, path);
        Array.isArray(value) && (value = value.filter((item)=>typeof item == "object" ? item?._type !== "reference" || "_ref" in item : !0)), selectedValue[key] = value;
    }
    return selectedValue;
}, toFieldLanguagesKeyPrefix = "sanityStudio:assist:field-languages:from:";
function getPreferredToFieldLanguages(fromLanguageId) {
    if (typeof localStorage > "u") return [];
    const value = localStorage.getItem(`${toFieldLanguagesKeyPrefix}${fromLanguageId}`);
    return value ? JSON.parse(value) : [];
}
function setPreferredToFieldLanguages(fromLanguageId, languageIds) {
    typeof localStorage > "u" || localStorage.setItem(`${toFieldLanguagesKeyPrefix}${fromLanguageId}`, JSON.stringify(languageIds));
}
const DEFAULT_MAX_DEPTH = 6, ABSOLUTE_MAX_DEPTH = 50;
function getDocumentMembersFlat(doc, schemaType, maxDepth2 = DEFAULT_MAX_DEPTH) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isDocumentSchemaType"])(schemaType) ? extractPaths(doc, schemaType, [], Math.min(maxDepth2, ABSOLUTE_MAX_DEPTH)) : (console.error("Schema type is not a document"), []);
}
function extractPaths(doc, schemaType, path, maxDepth2) {
    return path.length >= maxDepth2 ? [] : schemaType.fields.reduce((acc, field)=>{
        const fieldPath = [
            ...path,
            field.name
        ], fieldSchema = field.type, { value } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$mutator$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["extractWithPath"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(fieldPath), doc)[0] ?? {};
        if (!value) return acc;
        const thisFieldWithPath = {
            path: fieldPath,
            name: field.name,
            schemaType: fieldSchema,
            value
        };
        if (fieldSchema.jsonType === "object") {
            const innerFields = extractPaths(doc, fieldSchema, fieldPath, maxDepth2);
            return [
                ...acc,
                thisFieldWithPath,
                ...innerFields
            ];
        } else if (fieldSchema.jsonType === "array" && fieldSchema.of.length && fieldSchema.of.some((item)=>"fields" in item) && // no reason to drill into arrays if the item fields will be culled by maxDepth, ie we need 1 extra path headroom
        path.length + 1 < maxDepth2) {
            const { value: arrayValue } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$mutator$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["extractWithPath"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(fieldPath), doc)[0] ?? {};
            let arrayPaths = [];
            if (arrayValue?.length) for (const item of arrayValue){
                const itemPath = [
                    ...fieldPath,
                    {
                        _key: item._key
                    }
                ];
                let itemSchema = fieldSchema.of.find((t)=>t.name === item._type);
                if (item._type || (itemSchema = fieldSchema.of[0], console.warn("Array item is missing _type - using the first defined type in the array.of schema", {
                    itemPath,
                    item,
                    itemSchema
                })), item._key && itemSchema) {
                    const innerFields = extractPaths(doc, itemSchema, itemPath, maxDepth2), arrayMember = {
                        path: itemPath,
                        name: item._key,
                        schemaType: itemSchema,
                        value: item
                    };
                    arrayPaths = [
                        ...arrayPaths,
                        arrayMember,
                        ...innerFields
                    ];
                }
            }
            return [
                ...acc,
                thisFieldWithPath,
                ...arrayPaths
            ];
        }
        return [
            ...acc,
            thisFieldWithPath
        ];
    }, []);
}
const defaultLanguageOutputs = function(member, enclosingType, translateFromLanguageId, translateToLanguageIds) {
    if (member.schemaType.jsonType === "object" && member.schemaType.name.startsWith("internationalizedArray")) {
        const pathEnd = member.path.slice(-1);
        return ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isKeySegment"])(pathEnd[0]) ? pathEnd[0]._key : null) === translateFromLanguageId ? translateToLanguageIds.map((translateToId)=>({
                id: translateToId,
                outputPath: [
                    ...member.path.slice(0, -1),
                    {
                        _key: translateToId
                    }
                ]
            })) : void 0;
    }
    if (enclosingType.jsonType === "object" && enclosingType.name.startsWith("locale")) return translateFromLanguageId === member.name ? translateToLanguageIds.map((translateToId)=>({
            id: translateToId,
            outputPath: [
                ...member.path.slice(0, -1),
                translateToId
            ]
        })) : void 0;
};
function getFieldLanguageMap(documentSchema, documentMembers, translateFromLanguageId, outputLanguageIds, langFn) {
    const translationMaps = [];
    for (const member of documentMembers){
        const parentPath = member.path.slice(0, -1), enclosingType = documentMembers.find((m)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(m.path) === (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(parentPath))?.schemaType ?? documentSchema, translations = langFn(member, enclosingType, translateFromLanguageId, outputLanguageIds)?.filter((translation)=>translation.id !== translateFromLanguageId);
        translations && translationMaps.push({
            inputLanguageId: translateFromLanguageId,
            inputPath: member.path,
            outputs: translations
        });
    }
    return translationMaps;
}
const FieldTranslationContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])({
    openFieldTranslation: ()=>{},
    translationLoading: !1
});
function useFieldTranslation() {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(FieldTranslationContext);
}
function hasValuesToTranslate(fieldLanguageMaps, fromLanguage, basePath2) {
    return fieldLanguageMaps?.some((map)=>map.inputLanguageId === fromLanguage?.id && map.inputPath && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(map.inputPath).startsWith((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])(basePath2)));
}
function FieldTranslationProvider(props) {
    const { config: assistConfig } = useAiAssistanceConfig(), apiClient = useApiClient(assistConfig.__customApiClient), styleguide = assistConfig.translate?.styleguide, config = assistConfig.translate?.field, { translate: runTranslate } = useTranslate(apiClient), [dialogOpen, setDialogOpen] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1), [fieldTranslationParams, setFieldTranslationParams] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(), [languages, setLanguages] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(), [fromLanguage, setFromLanguage] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(void 0), [toLanguages, setToLanguages] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(void 0), [fieldLanguageMaps, setFieldLanguageMaps] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(), close = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldTranslationProvider.useCallback[close]": ()=>{
            setDialogOpen(!1), setLanguages(void 0), setFieldTranslationParams(void 0);
        }
    }["FieldTranslationProvider.useCallback[close]"], []), languageClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useClient"])({
        apiVersion: config?.apiVersion ?? "2022-11-27"
    }), documentId = fieldTranslationParams?.document?._id, id = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useId"])(), selectFromLanguage = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldTranslationProvider.useCallback[selectFromLanguage]": (from, languages2, params)=>{
            const { document: document2, documentSchema } = params ?? {};
            if (setFromLanguage(from), !document2 || !documentSchema || !params || !languages2) {
                setFieldLanguageMaps(void 0);
                return;
            }
            const preferred = getPreferredToFieldLanguages(from.id), allToLanguages = languages2.filter({
                "FieldTranslationProvider.useCallback[selectFromLanguage].allToLanguages": (l)=>l.id !== from?.id
            }["FieldTranslationProvider.useCallback[selectFromLanguage].allToLanguages"]), filteredToLanguages = allToLanguages.filter({
                "FieldTranslationProvider.useCallback[selectFromLanguage].filteredToLanguages": (l)=>!preferred.length || preferred.includes(l.id)
            }["FieldTranslationProvider.useCallback[selectFromLanguage].filteredToLanguages"]);
            setToLanguages(filteredToLanguages);
            const fromId = from?.id, allToIds = allToLanguages?.map({
                "FieldTranslationProvider.useCallback[selectFromLanguage]": (l)=>l.id
            }["FieldTranslationProvider.useCallback[selectFromLanguage]"]) ?? [], docMembers = getDocumentMembersFlat(document2, documentSchema, config?.maxPathDepth);
            if (fromId && allToIds?.length) {
                const transMap = getFieldLanguageMap(documentSchema, docMembers, fromId, allToIds.filter({
                    "FieldTranslationProvider.useCallback[selectFromLanguage].transMap": (toId)=>fromId !== toId
                }["FieldTranslationProvider.useCallback[selectFromLanguage].transMap"]), config?.translationOutputs ?? defaultLanguageOutputs);
                setFieldLanguageMaps(transMap);
            } else setFieldLanguageMaps(void 0);
        }
    }["FieldTranslationProvider.useCallback[selectFromLanguage]"], [
        config
    ]), toggleToLanguage = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldTranslationProvider.useCallback[toggleToLanguage]": (toggledLang, toLanguages2, languages2)=>{
            if (!languages2 || !fromLanguage) return;
            const wasSelected = !!toLanguages2?.find({
                "FieldTranslationProvider.useCallback[toggleToLanguage]": (l)=>l.id === toggledLang.id
            }["FieldTranslationProvider.useCallback[toggleToLanguage]"]), newToLangs = languages2.filter({
                "FieldTranslationProvider.useCallback[toggleToLanguage].newToLangs": (anyLang)=>!!toLanguages2?.find({
                        "FieldTranslationProvider.useCallback[toggleToLanguage].newToLangs": (selectedLang)=>toggledLang.id !== selectedLang.id && selectedLang.id === anyLang.id
                    }["FieldTranslationProvider.useCallback[toggleToLanguage].newToLangs"]) || toggledLang.id === anyLang.id && !wasSelected
            }["FieldTranslationProvider.useCallback[toggleToLanguage].newToLangs"]);
            setToLanguages(newToLangs), setPreferredToFieldLanguages(fromLanguage.id, newToLangs.map({
                "FieldTranslationProvider.useCallback[toggleToLanguage]": (l)=>l.id
            }["FieldTranslationProvider.useCallback[toggleToLanguage]"]));
        }
    }["FieldTranslationProvider.useCallback[toggleToLanguage]"], [
        fromLanguage
    ]), openFieldTranslation = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldTranslationProvider.useCallback[openFieldTranslation]": async (params)=>{
            setDialogOpen(!0);
            const languageParams = getLanguageParams(config?.selectLanguageParams, params.document), languages2 = await (typeof config?.languages == "function" ? config?.languages(languageClient, languageParams) : Promise.resolve(config?.languages));
            setLanguages(languages2), setFieldTranslationParams(params);
            const fromLanguage2 = languages2?.[0];
            fromLanguage2 ? selectFromLanguage(fromLanguage2, languages2, params) : console.error("No languages available for selected language params", languageParams);
        }
    }["FieldTranslationProvider.useCallback[openFieldTranslation]"], [
        selectFromLanguage,
        config,
        languageClient
    ]), contextValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "FieldTranslationProvider.useMemo[contextValue]": ()=>({
                openFieldTranslation,
                translationLoading: !1
            })
    }["FieldTranslationProvider.useMemo[contextValue]"], [
        openFieldTranslation
    ]), runDisabled = !fromLanguage || !toLanguages?.length || !fieldLanguageMaps?.length || !documentId || !hasValuesToTranslate(fieldLanguageMaps, fromLanguage, fieldTranslationParams.translatePath), onRunTranslation = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldTranslationProvider.useCallback[onRunTranslation]": ()=>{
            const translatePath = fieldTranslationParams?.translatePath;
            fieldLanguageMaps && documentId && translatePath && runTranslate({
                documentId,
                translatePath,
                styleguide,
                fieldLanguageMap: fieldLanguageMaps.map({
                    "FieldTranslationProvider.useCallback[onRunTranslation]": (map)=>({
                            ...map,
                            // eslint-disable-next-line max-nested-callbacks
                            outputs: map.outputs.filter({
                                "FieldTranslationProvider.useCallback[onRunTranslation]": (out)=>!!toLanguages?.find({
                                        "FieldTranslationProvider.useCallback[onRunTranslation]": (l)=>l.id === out.id
                                    }["FieldTranslationProvider.useCallback[onRunTranslation]"])
                            }["FieldTranslationProvider.useCallback[onRunTranslation]"])
                        })
                }["FieldTranslationProvider.useCallback[onRunTranslation]"]),
                conditionalMembers: fieldTranslationParams?.conditionalMembers
            }), close();
        }
    }["FieldTranslationProvider.useCallback[onRunTranslation]"], [
        fieldLanguageMaps,
        documentId,
        runTranslate,
        styleguide,
        close,
        toLanguages,
        fieldTranslationParams?.translatePath,
        fieldTranslationParams?.conditionalMembers
    ]), runButton = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
        text: "Translate",
        tone: "primary",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PlayIcon"],
        style: {
            width: "100%"
        },
        disabled: runDisabled,
        onClick: onRunTranslation
    });
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(FieldTranslationContext.Provider, {
        value: contextValue,
        children: [
            dialogOpen ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Dialog"], {
                id,
                width: 1,
                open: dialogOpen,
                onClose: close,
                header: "Translate fields",
                footer: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    justify: "space-between",
                    padding: 2,
                    flex: 1,
                    children: runDisabled ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Tooltip"], {
                        content: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                            padding: 2,
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                children: "There is nothing to translate in the selected from-language."
                            })
                        }),
                        placement: "top",
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                            flex: 1,
                            children: runButton
                        })
                    }) : runButton
                }),
                children: languages ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    padding: 4,
                    gap: 5,
                    align: "flex-start",
                    justify: "center",
                    children: [
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                            space: 2,
                            children: [
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                                    marginBottom: 2,
                                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                        weight: "semibold",
                                        children: "From"
                                    })
                                }),
                                languages?.map((radioLanguage)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FromLanguageRadio, {
                                        radioLanguage,
                                        fromLanguage,
                                        selectFromLanguage,
                                        languages,
                                        fieldTranslationParams
                                    }, radioLanguage.id))
                            ]
                        }),
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                            space: 2,
                            children: [
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                                    marginBottom: 2,
                                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                        weight: "semibold",
                                        children: "To"
                                    })
                                }),
                                languages.map((checkboxLanguage)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ToLanguageCheckbox, {
                                        checkboxLanguage,
                                        fromLanguage,
                                        toLanguages,
                                        toggleToLanguage,
                                        languages
                                    }, checkboxLanguage.id))
                            ]
                        })
                    ]
                }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    padding: 4,
                    gap: 2,
                    align: "flex-start",
                    justify: "center",
                    children: [
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {})
                        }),
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                            children: "Loading languages..."
                        })
                    ]
                })
            }) : null,
            props.children
        ]
    });
}
function ToLanguageCheckbox(props) {
    const { checkboxLanguage, fromLanguage, toLanguages, toggleToLanguage, languages } = props, langId = checkboxLanguage.id, onChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "ToLanguageCheckbox.useCallback[onChange]": ()=>toggleToLanguage(checkboxLanguage, toLanguages, languages)
    }["ToLanguageCheckbox.useCallback[onChange]"], [
        toggleToLanguage,
        checkboxLanguage,
        toLanguages,
        languages
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        gap: 3,
        align: "center",
        as: "label",
        style: langId === fromLanguage?.id ? {
            opacity: 0.5
        } : void 0,
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Checkbox"], {
                name: "toLang",
                value: langId,
                checked: langId !== fromLanguage?.id && !!toLanguages?.find((tl)=>tl.id === langId),
                onChange,
                disabled: langId === fromLanguage?.id
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                muted: langId === fromLanguage?.id,
                children: checkboxLanguage.title ?? langId
            })
        ]
    }, langId);
}
function FromLanguageRadio(props) {
    const { languages, radioLanguage, selectFromLanguage, fromLanguage, fieldTranslationParams } = props, langId = radioLanguage.id, onChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FromLanguageRadio.useCallback[onChange]": ()=>selectFromLanguage(radioLanguage, languages, fieldTranslationParams)
    }["FromLanguageRadio.useCallback[onChange]"], [
        selectFromLanguage,
        radioLanguage,
        languages,
        fieldTranslationParams
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        gap: 3,
        align: "center",
        as: "label",
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Radio"], {
                name: "fromLang",
                value: langId,
                checked: langId === fromLanguage?.id,
                onChange
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                children: radioLanguage.title ?? radioLanguage.id
            })
        ]
    }, langId);
}
function AssistLayout(props) {
    const [connectors, setConnectors] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AiAssistanceConfigProvider, {
        config: props.config,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(RunInstructionProvider, {
            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FieldTranslationProvider, {
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(ConnectorsProvider, {
                    onConnectorsChange: setConnectors,
                    children: [
                        props.renderDefault(props),
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ThemeProvider"], {
                            tone: "default",
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistConnectorsOverlay, {
                                connectors
                            })
                        })
                    ]
                })
            })
        })
    });
}
const ImageContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])({});
function ImageContextProvider(props) {
    const { schemaType, path, value, readOnly } = props, assetRef = value?.asset?._ref, { selectedReleaseId } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDocumentPane"])(), [assetRefState, setAssetRefState] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(assetRef), { assistableDocumentId, documentSchemaType } = useAssistDocumentContext(), { config, status } = useAiAssistanceConfig(), apiClient = useApiClient(config?.__customApiClient), { generateCaption } = useGenerateCaption(apiClient), { isSyncing } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useSyncState"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getPublishedId"])(assistableDocumentId), documentSchemaType.name, selectedReleaseId), isShowingOlderRevision = !!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["usePaneRouter"])().params?.rev;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "ImageContextProvider.useEffect": ()=>{
            const descriptionField = getDescriptionFieldOption(schemaType);
            assetRef && assistableDocumentId && descriptionField && assetRef !== assetRefState && !isSyncing && !isShowingOlderRevision && !readOnly && (setAssetRefState(assetRef), canUseAssist(status) && generateCaption({
                path: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])([
                    ...path,
                    descriptionField
                ]),
                documentId: assistableDocumentId
            }));
        }
    }["ImageContextProvider.useEffect"], [
        schemaType,
        path,
        assetRef,
        assetRefState,
        assistableDocumentId,
        generateCaption,
        isSyncing,
        status,
        readOnly,
        isShowingOlderRevision
    ]);
    const context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "ImageContextProvider.useMemo[context]": ()=>{
            const descriptionField = getDescriptionFieldOption(schemaType), imageInstructionField = getImageInstructionFieldOption(schemaType);
            return {
                imageDescriptionPath: descriptionField ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])([
                    ...path,
                    descriptionField
                ]) : void 0,
                imageInstructionPath: imageInstructionField ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["pathToString"])([
                    ...path,
                    imageInstructionField
                ]) : void 0,
                assetRef
            };
        }
    }["ImageContextProvider.useMemo[context]"], [
        schemaType,
        path,
        assetRef
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ImageContext.Provider, {
        value: context,
        children: props.renderDefault(props)
    });
}
function IconInput(props) {
    const { value, onChange } = props, id = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useId"])(), items = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "IconInput.useMemo[items]": ()=>Object.entries(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["icons"]).map({
                "IconInput.useMemo[items]": ([key, icon])=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(IconItem, {
                        iconKey: key,
                        icon,
                        onChange
                    }, key)
            }["IconInput.useMemo[items]"])
    }["IconInput.useMemo[items]"], [
        onChange
    ]), selectedIcon = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "IconInput.useMemo[selectedIcon]": ()=>getIcon(value)
    }["IconInput.useMemo[selectedIcon]"], [
        value
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["MenuButton"], {
        button: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
            icon: selectedIcon,
            title: "Select icon",
            padding: 3,
            mode: "ghost",
            radius: 1
        }),
        id,
        menu: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Menu"], {
            style: {
                maxHeight: 300
            },
            children: items
        }),
        popover: {
            portal: !0
        }
    });
}
function IconItem({ icon, iconKey: key, onChange }) {
    const onClick = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "IconItem.useCallback[onClick]": ()=>onChange((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["set"])(key))
    }["IconItem.useCallback[onClick]"], [
        onChange,
        key
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MenuItem"], {
        icon,
        title: key,
        text: key,
        onClick
    });
}
function getIcon(iconName) {
    return Object.entries(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["icons"]).find(([key])=>key === iconName)?.[1] ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["icons"].sparkles;
}
function useAssistSupported(path, schemaType) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useAssistSupported.useMemo": ()=>isAssistSupported(schemaType)
    }["useAssistSupported.useMemo"], [
        schemaType
    ]);
}
const translateActions = {
    name: "sanity-assist-translate",
    useAction (props) {
        const { config, status } = useAiAssistanceConfig(), apiClient = useApiClient(config?.__customApiClient), { schemaType: fieldSchemaType, path, documentId, documentSchemaType, documentIsAssistable } = props, isDocumentLevel = path.length === 0, readOnly = fieldSchemaType.readOnly === !0, docTransTypes = config.translate?.document?.documentTypes, options2 = fieldSchemaType?.options, addFieldAction = isDocumentLevel || options2?.aiAssist?.translateAction, fieldTransEnabled = addFieldAction && documentSchemaType && config.translate?.field?.documentTypes?.includes(documentSchemaType.name), documentTranslationEnabled = addFieldAction && documentSchemaType && (!docTransTypes && isAssistSupported(fieldSchemaType) || docTransTypes?.includes(documentSchemaType.name));
        if (documentSchemaType && (documentTranslationEnabled || fieldTransEnabled)) {
            const { value: documentValue, onChange: documentOnChange, formState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDocumentPane"])(), docRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(documentValue);
            docRef.current = documentValue;
            const formStateRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(formState);
            formStateRef.current = formState;
            const translationApi = useTranslate(apiClient), translate = useDraftDelayedTask({
                documentOnChange,
                isDocAssistable: documentIsAssistable ?? !1,
                task: translationApi.translate
            }), styleguide = config.translate?.styleguide, languagePath = config.translate?.document?.languageField, translateDocumentAction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
                "useMemo[translateDocumentAction]": ()=>{
                    if (!languagePath || !documentTranslationEnabled) return;
                    const title = path.length ? "Translate" : "Translate document";
                    return {
                        type: "action",
                        icon: translationApi.loading ? ({
                            "useMemo[translateDocumentAction]": ()=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                                    style: {
                                        height: 17
                                    },
                                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {
                                        style: {
                                            transform: "translateY(6px)"
                                        }
                                    })
                                })
                        })["useMemo[translateDocumentAction]"] : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TranslateIcon"],
                        title,
                        onAction: ({
                            "useMemo[translateDocumentAction]": ()=>{
                                translationApi.loading || !languagePath || !documentId || translate({
                                    languagePath,
                                    translatePath: path,
                                    styleguide,
                                    documentId: documentId ?? "",
                                    conditionalMembers: formStateRef.current ? getConditionalMembers(formStateRef.current) : []
                                });
                            }
                        })["useMemo[translateDocumentAction]"],
                        renderAsButton: !0,
                        disabled: translationApi.loading || readOnly
                    };
                }
            }["useMemo[translateDocumentAction]"], [
                languagePath,
                translate,
                styleguide,
                documentId,
                translationApi.loading,
                documentTranslationEnabled,
                path,
                readOnly
            ]), fieldTranslate = useFieldTranslation(), openFieldTranslation = useDraftDelayedTask({
                documentOnChange,
                isDocAssistable: documentIsAssistable ?? !1,
                task: fieldTranslate.openFieldTranslation
            }), maxDepth2 = config.translate?.field?.maxPathDepth, translateFieldsAction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
                "useMemo[translateFieldsAction]": ()=>fieldTransEnabled ? {
                        type: "action",
                        icon: fieldTranslate.translationLoading ? ({
                            "useMemo[translateFieldsAction]": ()=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                                    style: {
                                        height: 17
                                    },
                                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {
                                        style: {
                                            transform: "translateY(6px)"
                                        }
                                    })
                                })
                        })["useMemo[translateFieldsAction]"] : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TranslateIcon"],
                        title: "Translate fields...",
                        onAction: ({
                            "useMemo[translateFieldsAction]": ()=>{
                                fieldTranslate.translationLoading || !documentId || (formStateRef.current && getConditionalMembers(formStateRef.current), openFieldTranslation({
                                    document: docRef.current,
                                    documentSchema: documentSchemaType,
                                    translatePath: path,
                                    conditionalMembers: formStateRef.current ? getConditionalMembers(formStateRef.current, maxDepth2) : []
                                }));
                            }
                        })["useMemo[translateFieldsAction]"],
                        renderAsButton: !0,
                        disabled: fieldTranslate.translationLoading || readOnly
                    } : void 0
            }["useMemo[translateFieldsAction]"], [
                openFieldTranslation,
                documentSchemaType,
                documentId,
                fieldTranslate.translationLoading,
                fieldTransEnabled,
                path,
                readOnly,
                maxDepth2
            ]);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])(()=>{
                if (status?.initialized) return {
                    type: "group",
                    icon: ()=>null,
                    title: "Translation",
                    children: [
                        translateDocumentAction,
                        translateFieldsAction
                    ].filter((c)=>!!c),
                    expanded: !0
                };
            }, [
                translateDocumentAction,
                translateFieldsAction,
                status
            ]);
        }
    }
}, generateCaptionsActions = {
    name: "sanity-assist-generate-captions",
    useAction (props) {
        const pathKey = usePathKey(props.path), { openInspector } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDocumentPane"])(), { config, status } = useAiAssistanceConfig(), apiClient = useApiClient(config?.__customApiClient), { generateCaption, loading } = useGenerateCaption(apiClient), imageContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(ImageContext);
        if (imageContext && pathKey === imageContext?.imageDescriptionPath) {
            const { assistableDocumentId } = useAssistDocumentContext();
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])(()=>({
                    type: "action",
                    icon: loading ? ()=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            style: {
                                height: 17
                            },
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {
                                style: {
                                    transform: "translateY(6px)"
                                }
                            })
                        }) : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ImageIcon"],
                    title: "Generate image description",
                    onAction: ()=>{
                        if (!loading) {
                            if (!canUseAssist(status)) {
                                openInspector(aiInspectorId, {
                                    [fieldPathParam]: pathKey,
                                    [instructionParam]: void 0
                                });
                                return;
                            }
                            generateCaption({
                                path: pathKey,
                                documentId: assistableDocumentId
                            });
                        }
                    },
                    renderAsButton: !0,
                    disabled: loading,
                    hidden: !imageContext.assetRef
                }), [
                generateCaption,
                pathKey,
                assistableDocumentId,
                loading,
                imageContext,
                status,
                openInspector
            ]);
        }
    }
}, generateImagActions = {
    name: "sanity-assist-generate-image",
    useAction (props) {
        const pathKey = usePathKey(props.path), { config } = useAiAssistanceConfig(), apiClient = useApiClient(config?.__customApiClient), { generateImage, loading } = useGenerateImage(apiClient), imageContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(ImageContext);
        if (imageContext && pathKey === imageContext?.imageInstructionPath) {
            const { assistableDocumentId } = useAssistDocumentContext();
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])(()=>({
                    type: "action",
                    icon: loading ? ()=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            style: {
                                height: 17
                            },
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {
                                style: {
                                    transform: "translateY(6px)"
                                }
                            })
                        }) : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ImageIcon"],
                    title: "Generate image from prompt",
                    onAction: ()=>{
                        loading || generateImage({
                            path: pathKey,
                            documentId: assistableDocumentId
                        });
                    },
                    renderAsButton: !0,
                    disabled: loading
                }), [
                generateImage,
                pathKey,
                assistableDocumentId,
                loading
            ]);
        }
    }
};
function PrivateIcon() {
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Tooltip"], {
        content: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
            size: 1,
            style: {
                whiteSpace: "nowrap"
            },
            children: "Only visible to you"
        }),
        fallbackPlacements: [
            "bottom"
        ],
        padding: 2,
        placement: "top",
        portal: !0,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LockIcon"], {})
    });
}
const assistFieldActions = {
    name: "sanity-assist-actions",
    useAction (props) {
        const { schemaType } = props, { assistDocument, documentIsNew, documentIsAssistable, openInspector, closeInspector, inspector, documentOnChange, documentSchemaType, selectedPath, assistableDocumentId } = useAssistDocumentContext(), { value: docValue, formState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDocumentPane"])(), formStateRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(formState);
        formStateRef.current = formState;
        const currentUser = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useCurrentUser"])(), isHidden = !assistDocument, pathKey = usePathKey(props.path), typePath = useTypePath(docValue, pathKey), assistDocumentId2 = assistDocument?._id, { requestRunInstruction } = useRequestRunInstruction({
            documentOnChange,
            isDocAssistable: documentIsAssistable ?? !1
        }), isSelectable = !!useSelectedField(documentSchemaType, typePath), assistSupported = useAssistSupported(props.path, schemaType) && isSelectable && isSchemaAssistEnabled(documentSchemaType) && schemaType.readOnly !== !0, fieldAssist = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
            "useMemo[fieldAssist]": ()=>(assistDocument?.fields ?? []).find({
                    "useMemo[fieldAssist]": (f)=>f.path === typePath || pathKey === documentRootKey && f.path === pathKey
                }["useMemo[fieldAssist]"])
        }["useMemo[fieldAssist]"], [
            assistDocument?.fields,
            pathKey,
            typePath
        ]), fieldAssistKey = fieldAssist?._key, isSelected = inspector?.name === aiInspectorId && pathKey === selectedPath, imageCaptionAction = generateCaptionsActions.useAction(props), imageGenAction = generateImagActions.useAction(props), translateAction = translateActions.useAction((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])({
            ...props,
            documentId: assistableDocumentId,
            documentIsAssistable,
            documentSchemaType
        })), manageInstructions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
            "useCallback[manageInstructions]": ()=>isSelected ? closeInspector(aiInspectorId) : openInspector(aiInspectorId, {
                    [fieldPathParam]: pathKey,
                    [instructionParam]: void 0
                })
        }["useCallback[manageInstructions]"], [
            openInspector,
            closeInspector,
            isSelected,
            pathKey
        ]), onInstructionAction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
            "useCallback[onInstructionAction]": (instruction2)=>{
                !pathKey || !fieldAssistKey || !assistDocumentId2 || !assistableDocumentId || requestRunInstruction({
                    documentId: assistableDocumentId,
                    assistDocumentId: assistDocumentId2,
                    path: pathKey,
                    typePath,
                    instruction: instruction2,
                    conditionalMembers: formStateRef.current ? getConditionalMembers(formStateRef.current) : []
                });
            }
        }["useCallback[onInstructionAction]"], [
            requestRunInstruction,
            assistableDocumentId,
            pathKey,
            typePath,
            assistDocumentId2,
            fieldAssistKey
        ]), privateInstructions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
            "useMemo[privateInstructions]": ()=>fieldAssist?.instructions?.filter({
                    "useMemo[privateInstructions]": (i)=>i.userId && i.userId === currentUser?.id
                }["useMemo[privateInstructions]"]) || []
        }["useMemo[privateInstructions]"], [
            fieldAssist?.instructions,
            currentUser
        ]), sharedInstructions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
            "useMemo[sharedInstructions]": ()=>fieldAssist?.instructions?.filter({
                    "useMemo[sharedInstructions]": (i)=>!i.userId
                }["useMemo[sharedInstructions]"]) || []
        }["useMemo[sharedInstructions]"], [
            fieldAssist?.instructions
        ]), instructions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
            "useMemo[instructions]": ()=>[
                    ...privateInstructions,
                    ...sharedInstructions
                ]
        }["useMemo[instructions]"], [
            privateInstructions,
            sharedInstructions
        ]), runInstructionsGroup = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
            "useMemo[runInstructionsGroup]": ()=>instructions?.length || imageCaptionAction || translateAction || imageGenAction ? {
                    type: "group",
                    icon: ({
                        "useMemo[runInstructionsGroup]": ()=>null
                    })["useMemo[runInstructionsGroup]"],
                    title: "Run instructions",
                    children: [
                        ...instructions?.map({
                            "useMemo[runInstructionsGroup]": (instruction2)=>instructionItem({
                                    instruction: instruction2,
                                    isPrivate: !!(instruction2.userId && instruction2.userId === currentUser?.id),
                                    onInstructionAction,
                                    hidden: isHidden,
                                    documentIsNew: !!documentIsNew,
                                    assistSupported
                                })
                        }["useMemo[runInstructionsGroup]"]) || [],
                        imageCaptionAction,
                        imageGenAction
                    ].filter({
                        "useMemo[runInstructionsGroup]": (a)=>!!a
                    }["useMemo[runInstructionsGroup]"]),
                    expanded: !0
                } : void 0
        }["useMemo[runInstructionsGroup]"], [
            instructions,
            currentUser?.id,
            onInstructionAction,
            isHidden,
            documentIsNew,
            assistSupported,
            imageCaptionAction,
            translateAction,
            imageGenAction
        ]), instructionsLength = instructions?.length || 0, manageInstructionsItem = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
            "useMemo[manageInstructionsItem]": ()=>({
                    type: "action",
                    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ControlsIcon"],
                    title: "Manage instructions",
                    onAction: manageInstructions,
                    selected: isSelected
                })
        }["useMemo[manageInstructionsItem]"], [
            manageInstructions,
            isSelected
        ]), group = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
            "useMemo[group]": ()=>({
                    type: "group",
                    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SparklesIcon"],
                    title: pluginTitleShort,
                    children: [
                        runInstructionsGroup,
                        translateAction,
                        assistSupported && manageInstructionsItem
                    ].filter({
                        "useMemo[group]": (c)=>!!c
                    }["useMemo[group]"]).filter({
                        "useMemo[group]": (c)=>c.type === "group" ? c.children.length : !0
                    }["useMemo[group]"]),
                    expanded: !1,
                    renderAsButton: !0,
                    hidden: !assistSupported && !imageCaptionAction && !translateAction && !imageGenAction
                })
        }["useMemo[group]"], [
            //documentIsNew,
            runInstructionsGroup,
            manageInstructionsItem,
            assistSupported,
            imageCaptionAction,
            translateAction,
            imageGenAction
        ]), emptyAction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
            "useMemo[emptyAction]": ()=>({
                    type: "action",
                    hidden: !assistSupported,
                    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SparklesIcon"],
                    onAction: manageInstructions,
                    renderAsButton: !0,
                    title: pluginTitleShort,
                    selected: isSelected
                })
        }["useMemo[emptyAction]"], [
            assistSupported,
            manageInstructions,
            isSelected
        ]);
        return instructionsLength === 0 && !imageCaptionAction && !translateAction && !imageGenAction ? emptyAction : group;
    }
};
function instructionItem(props) {
    const { hidden, isPrivate, onInstructionAction, assistSupported, instruction: instruction2 } = props;
    return {
        type: "action",
        icon: getIcon(instruction2.icon),
        iconRight: isPrivate ? PrivateIcon : void 0,
        title: getInstructionTitle(instruction2),
        onAction: ()=>onInstructionAction(instruction2),
        disabled: !assistSupported,
        hidden
    };
}
function createAssistDocumentPresence(documentId) {
    return function() {
        return documentId ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistDocumentPresence, {}) : null;
    };
}
function AssistDocumentPresence() {
    const { assistDocument } = useAssistDocumentContext(), anyPresence = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistDocumentPresence.useMemo[anyPresence]": ()=>{
            const anyPresence2 = assistDocument?.tasks?.filter({
                "AssistDocumentPresence.useMemo[anyPresence]": (run)=>!run.ended && !run.reason
            }["AssistDocumentPresence.useMemo[anyPresence]"])?.flatMap({
                "AssistDocumentPresence.useMemo[anyPresence]": (run)=>run.presence ?? []
            }["AssistDocumentPresence.useMemo[anyPresence]"]).find({
                "AssistDocumentPresence.useMemo[anyPresence]": (f)=>f.started && /* @__PURE__ */ new Date().getTime() - new Date(f.started).getTime() < 3e4
            }["AssistDocumentPresence.useMemo[anyPresence]"]);
            if (anyPresence2) return aiPresence(anyPresence2, []);
            const anyRun = assistDocument?.tasks?.filter({
                "AssistDocumentPresence.useMemo[anyPresence]": (run)=>!run.ended && !run.reason
            }["AssistDocumentPresence.useMemo[anyPresence]"])?.find({
                "AssistDocumentPresence.useMemo[anyPresence]": (f)=>f.started && /* @__PURE__ */ new Date().getTime() - new Date(f.started).getTime() < 3e4
            }["AssistDocumentPresence.useMemo[anyPresence]"]);
            return anyRun ? aiPresence({
                started: anyRun.started,
                path: documentRootKey,
                _key: anyRun._key,
                _type: fieldPresenceTypeName
            }, []) : void 0;
        }
    }["AssistDocumentPresence.useMemo[anyPresence]"], [
        assistDocument?.tasks
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
            flex: 1,
            justify: "flex-end",
            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                gap: 2,
                align: "center",
                children: anyPresence && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AiFieldPresence, {
                    presence: anyPresence
                })
            })
        })
    });
}
function BackToInstructionListLink() {
    const { openInspector } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$_chunks$2d$es$2f$pane$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDocumentPane"])(), goBack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "BackToInstructionListLink.useCallback[goBack]": ()=>openInspector(aiInspectorId, {
                [instructionParam]: void 0
            })
    }["BackToInstructionListLink.useCallback[goBack]"], [
        openInspector
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("div", {
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
            as: "a",
            fontSize: 1,
            icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ArrowLeftIcon"],
            mode: "bleed",
            padding: 1,
            space: 2,
            onClick: goBack,
            text: "  Instructions",
            textAlign: "left"
        })
    });
}
const EMPTY_FIELDS = [];
function AssistDocumentForm(props) {
    return props.readOnly ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        border: !0,
        tone: "caution",
        padding: 2,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
            size: 1,
            children: " You do not have sufficient permissions to manage instructions."
        })
    }) : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistDocumentFormEditable, {
        ...props
    });
}
function AssistDocumentFormEditable(props) {
    const { onChange } = props, value = props.value, id = value?._id, fields = value?.fields, { params, setParams } = useAiPaneRouter(), pathKey = params[fieldPathParam], { typePath, documentType: targetDocumentType } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(AssistTypeContext), instruction2 = params[instructionParam], activeKey = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistDocumentFormEditable.useMemo[activeKey]": ()=>{
            if (typePath) return (fields ?? EMPTY_FIELDS).find({
                "AssistDocumentFormEditable.useMemo[activeKey]": (f)=>f.path === typePath
            }["AssistDocumentFormEditable.useMemo[activeKey]"])?._key;
        }
    }["AssistDocumentFormEditable.useMemo[activeKey]"], [
        fields,
        typePath
    ]), activePath = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistDocumentFormEditable.useMemo[activePath]": ()=>{
            if (!activeKey) return;
            const base = [
                "fields",
                {
                    _key: activeKey
                }
            ];
            return instruction2 ? [
                ...base,
                "instructions",
                {
                    _key: instruction2
                }
            ] : base;
        }
    }["AssistDocumentFormEditable.useMemo[activePath]"], [
        activeKey,
        instruction2
    ]), schema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useSchema"])(), documentSchema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistDocumentFormEditable.useMemo[documentSchema]": ()=>{
            if (targetDocumentType) return schema.get(targetDocumentType);
        }
    }["AssistDocumentFormEditable.useMemo[documentSchema]"], [
        schema,
        targetDocumentType
    ]), fieldSchema = useSelectedSchema(pathKey, documentSchema), context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistDocumentFormEditable.useMemo[context]": ()=>({
                documentSchema,
                fieldSchema: fieldSchema ?? documentSchema
            })
    }["AssistDocumentFormEditable.useMemo[context]"], [
        fieldSchema,
        documentSchema
    ]), title = value?.title;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "AssistDocumentFormEditable.useEffect": ()=>{
            !title && documentSchema && !id?.startsWith("drafts.") && onChange((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["set"])(documentSchema.title ?? documentSchema.name, [
                "title"
            ]));
        }
    }["AssistDocumentFormEditable.useEffect"], [
        title,
        documentSchema,
        onChange,
        id
    ]);
    const { onPathOpen, ...formCallbacks } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useFormCallbacks"])(), newCallbacks = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "AssistDocumentFormEditable.useMemo[newCallbacks]": ()=>({
                ...formCallbacks,
                onPathOpen: ({
                    "AssistDocumentFormEditable.useMemo[newCallbacks]": (path)=>{
                        !instruction2 && path.length === 4 && path[2] === "instructions" ? (setParams((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])({
                            ...params,
                            [instructionParam]: path[3]?._key
                        })), onPathOpen([])) : setTimeout({
                            "AssistDocumentFormEditable.useMemo[newCallbacks]": ()=>onPathOpen(path)
                        }["AssistDocumentFormEditable.useMemo[newCallbacks]"], 0);
                    }
                })["AssistDocumentFormEditable.useMemo[newCallbacks]"]
            })
    }["AssistDocumentFormEditable.useMemo[newCallbacks]"], [
        formCallbacks,
        onPathOpen,
        params,
        setParams,
        instruction2
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "AssistDocumentFormEditable.useEffect": ()=>{
            activePath && !instruction2 && onPathOpen([]);
        }
    }["AssistDocumentFormEditable.useEffect"], [
        activePath,
        instruction2,
        onPathOpen
    ]), /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(SelectedFieldContextProvider, {
        value: context,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
            space: 5,
            children: [
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FieldsInitializer, {
                    pathKey: typePath,
                    activePath,
                    fields,
                    documentSchema,
                    onChange
                }, typePath),
                instruction2 && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(BackToInstructionListLink, {}),
                activePath && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["FormCallbacksProvider"], {
                    ...newCallbacks,
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("div", {
                        style: {
                            lineHeight: "1.25em"
                        },
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["FormInput"], {
                            ...props,
                            absolutePath: activePath
                        })
                    })
                }),
                !activePath && props.renderDefault(props)
            ]
        })
    });
}
function useSelectedSchema(fieldPath, documentSchema) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "useSelectedSchema.useMemo": ()=>{
            if (!fieldPath) return;
            if (fieldPath === documentRootKey) return documentSchema;
            const path = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["stringToPath"])(fieldPath);
            let currentSchema = documentSchema;
            for(let i = 0; i < path.length; i++){
                const segment = path[i], field = currentSchema?.fields.find({
                    "useSelectedSchema.useMemo": (f)=>f.name === segment
                }["useSelectedSchema.useMemo"]);
                if (!field) return;
                if (i === path.length - 1) return field.type;
                if (field.type.jsonType !== "object") return;
                currentSchema = field.type;
            }
            return currentSchema;
        }
    }["useSelectedSchema.useMemo"], [
        documentSchema,
        fieldPath
    ]);
}
function FieldsInitializer({ pathKey, activePath, fields, documentSchema, onChange }) {
    const { config: { __presets: presets } } = useAiAssistanceConfig(), existingField = fields?.find((f)=>f._key === pathKey), documentPresets = !!documentSchema?.name && presets?.[documentSchema?.name], missingPresetInstructions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "FieldsInitializer.useMemo[missingPresetInstructions]": ()=>{
            if (!documentPresets || !pathKey) return;
            const existingInstructions = existingField?.instructions;
            return documentPresets.fields?.find({
                "FieldsInitializer.useMemo[missingPresetInstructions]": (f)=>f.path === pathKey
            }["FieldsInitializer.useMemo[missingPresetInstructions]"])?.instructions?.filter({
                "FieldsInitializer.useMemo[missingPresetInstructions]": (i)=>!existingInstructions?.some({
                        "FieldsInitializer.useMemo[missingPresetInstructions]": (ei)=>ei._key === i._key
                    }["FieldsInitializer.useMemo[missingPresetInstructions]"])
            }["FieldsInitializer.useMemo[missingPresetInstructions]"]);
        }
    }["FieldsInitializer.useMemo[missingPresetInstructions]"], [
        documentPresets,
        pathKey,
        existingField
    ]), initialized = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(!1);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "FieldsInitializer.useEffect": ()=>{
            if (initialized.current || !pathKey || existingField && !missingPresetInstructions?.length) return;
            let event = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from([
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["setIfMissing"])([], [
                    "fields"
                ])
            ]);
            existingField || (event = event.append((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["insert"])([
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])({
                    _key: pathKey,
                    _type: assistFieldTypeName,
                    path: pathKey,
                    instructions: []
                })
            ], "after", [
                "fields",
                -1
            ]))), existingField?.instructions?.length || (event = event.append([
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["setIfMissing"])([], [
                    "fields",
                    {
                        _key: pathKey
                    },
                    "instructions"
                ])
            ])), missingPresetInstructions?.length && (event = event.append((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["insert"])(missingPresetInstructions.map({
                "FieldsInitializer.useEffect": (preset)=>({
                        ...preset,
                        _type: "sanity.assist.instruction",
                        prompt: preset.prompt?.map({
                            "FieldsInitializer.useEffect": (p)=>({
                                    markDefs: [],
                                    ...p
                                })
                        }["FieldsInitializer.useEffect"])
                    })
            }["FieldsInitializer.useEffect"]), "after", [
                "fields",
                {
                    _key: pathKey
                },
                "instructions",
                -1
            ]))), onChange(event), initialized.current = !0;
        }
    }["FieldsInitializer.useEffect"], [
        activePath,
        onChange,
        pathKey,
        existingField,
        missingPresetInstructions
    ]), null;
}
function FieldRefPreview(props) {
    const { actions } = props, documentSchema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(SelectedFieldContext)?.documentSchema, path = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(InlineBlockValueContext)?.path ?? props.path, selectedField = useSelectedField(documentSchema, path);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        gap: 2,
        align: "center",
        style: {
            width: "100%"
        },
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                flex: 1,
                gap: 2,
                align: "center",
                paddingY: 3,
                paddingX: 1,
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        size: 1,
                        textOverflow: "ellipsis",
                        children: selectedField?.title ?? "Select field"
                    })
                })
            }),
            actions
        ]
    });
}
function HiddenFieldTitle(props) {
    return props.renderDefault({
        ...props,
        title: "",
        level: props.level - 2,
        changed: !1
    });
}
function InstructionVisibility(props) {
    const { value, onChange } = props, user = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useCurrentUser"])(), handleChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "InstructionVisibility.useCallback[handleChange]": ()=>{
            const newValue = value ? "" : user?.id ?? "";
            onChange(newValue ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["set"])(newValue) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["unset"])());
        }
    }["InstructionVisibility.useCallback[handleChange]"], [
        onChange,
        user,
        value
    ]), id = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useId"])();
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
            gap: 2,
            align: "flex-start",
            children: [
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("div", {
                    style: {
                        margin: "-3px 0"
                    },
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Switch"], {
                        ...props.elementProps,
                        id,
                        value: `${!value}`,
                        checked: !value,
                        onChange: handleChange,
                        disabled: props.elementProps.readOnly
                    })
                }),
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                    muted: !0,
                    size: 1,
                    weight: "medium",
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("label", {
                        htmlFor: id,
                        children: "Make visible to all Studio members"
                    })
                })
            ]
        })
    });
}
function FieldRefPathInput(props) {
    const documentSchema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(SelectedFieldContext)?.documentSchema, { typePath } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(AssistTypeContext), ref = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null), id = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useId"])(), { onChange } = props;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "FieldRefPathInput.useEffect": ()=>{
            ref.current?.querySelector("input")?.focus();
        }
    }["FieldRefPathInput.useEffect"], []);
    const onSelect = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldRefPathInput.useCallback[onSelect]": (path)=>onChange((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["set"])(path))
    }["FieldRefPathInput.useCallback[onSelect]"], [
        onChange
    ]), filter2 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "FieldRefPathInput.useCallback[filter2]": (field)=>{
            if (!field.key.includes("|") || !typePath) return !0;
            if (field.key.includes("|") && !typePath.includes("|")) return !1;
            const fieldSegments = field.key.split("."), lastArrayItemIndex = fieldSegments.findLastIndex({
                "FieldRefPathInput.useCallback[filter2].lastArrayItemIndex": (s)=>s.includes("|")
            }["FieldRefPathInput.useCallback[filter2].lastArrayItemIndex"]), mustStartWith = fieldSegments.slice(0, lastArrayItemIndex + 1).join(".");
            return typePath.startsWith(mustStartWith);
        }
    }["FieldRefPathInput.useCallback[filter2]"], [
        typePath
    ]);
    return documentSchema ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
        flex: 1,
        style: {
            minWidth: 300
        },
        ref,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(FieldAutocomplete, {
            id,
            schemaType: documentSchema,
            onSelect,
            fieldPath: props.value,
            filter: filter2
        })
    }) : props.renderDefault(props);
}
function findFieldMember(members, fieldName) {
    return members.find((m)=>m.kind === "field" && m.name === fieldName || m.kind === "error" && m.fieldName === fieldName);
}
function findFieldsetMember(members, fieldsetName) {
    return members.find((m)=>m.kind === "fieldSet" && m.fieldSet.name === fieldsetName);
}
function InstructionInput(props) {
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
        space: [
            4,
            4,
            4,
            5
        ],
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(NameField, {
                ...props
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ShareField, {
                ...props
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ObjectMember, {
                fieldName: "prompt",
                ...props
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ObjectMember, {
                fieldName: "output",
                ...props
            })
        ]
    });
}
function ObjectMember({ fieldName, ...props }) {
    const member = findFieldMember(props.members, fieldName);
    return member ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["ObjectInputMember"], {
        ...props,
        member
    }) : null;
}
const NONE = [];
function NameField(props) {
    const fieldsetMember = findFieldsetMember(props.members, "appearance"), titleId = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useId"])(), members = fieldsetMember?.fieldSet.members ?? NONE, iconMember = findFieldMember(members, "icon"), titleMember = findFieldMember(members, "title"), titlePlaceholder = "Untitled", moddedTitleMember = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "NameField.useMemo[moddedTitleMember]": ()=>{
            if (titleMember) return titleMember.kind === "error" ? titleMember : {
                ...titleMember,
                field: {
                    ...titleMember?.field,
                    schemaType: {
                        ...titleMember?.field.schemaType,
                        placeholder: titlePlaceholder
                    }
                }
            };
        }
    }["NameField.useMemo[moddedTitleMember]"], [
        titleMember,
        titlePlaceholder
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
        space: 5,
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
            space: 2,
            children: [
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    gap: 1,
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        as: "label",
                        weight: "semibold",
                        size: 1,
                        htmlFor: titleId,
                        children: "Name"
                    })
                }),
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                    muted: !0,
                    size: 1,
                    children: "How this instruction appears in menus"
                }),
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    align: "center",
                    children: [
                        iconMember && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            flex: "none",
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["ObjectInputMember"], {
                                ...props,
                                member: iconMember
                            })
                        }),
                        moddedTitleMember && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                            flex: 1,
                            style: {
                                marginLeft: -1
                            },
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["ObjectInputMember"], {
                                ...props,
                                member: moddedTitleMember
                            })
                        })
                    ]
                })
            ]
        })
    });
}
function ShareField(props) {
    const members = findFieldsetMember(props.members, "appearance")?.fieldSet.members ?? NONE, visibilityMember = findFieldMember(members, "userId");
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
        children: visibilityMember && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["ObjectInputMember"], {
            ...props,
            member: visibilityMember
        })
    });
}
function InstructionOutputField(props) {
    const { fieldSchema } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(SelectedFieldContext) ?? {};
    return !fieldSchema || !((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isObjectSchemaType"])(fieldSchema) || (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isArrayOfObjectsSchemaType"])(fieldSchema)) ? null : /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(EnabledOutputField, {
        ...props,
        fieldSchema,
        children: props.children
    });
}
function EnabledOutputField({ fieldSchema, ...props }) {
    const [open, setOpen] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!!props.value?.length), onExpand = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "EnabledOutputField.useCallback[onExpand]": ()=>setOpen(!0)
    }["EnabledOutputField.useCallback[onExpand]"], []), onCollapse = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "EnabledOutputField.useCallback[onCollapse]": ()=>setOpen(!1)
    }["EnabledOutputField.useCallback[onCollapse]"], []);
    return props.renderDefault({
        ...props,
        collapsible: !0,
        onExpand,
        onCollapse,
        collapsed: !open,
        level: 1,
        title: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isObjectSchemaType"])(fieldSchema) ? "Allowed fields" : "Allowed types"
    });
}
function InstructionOutputInput(props) {
    const { fieldSchema } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(SelectedFieldContext) ?? {};
    return fieldSchema ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isObjectSchemaType"])(fieldSchema) ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ObjectOutputInput, {
        ...props,
        fieldSchema
    }) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isArrayOfObjectsSchemaType"])(fieldSchema) ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ArrayOutputInput, {
        ...props,
        fieldSchema
    }) : null : null;
}
function useEmptySelectAllValue(value, allowedValues, onChange) {
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useEmptySelectAllValue.useEffect": ()=>{
            const validValues = value?.filter({
                "useEmptySelectAllValue.useEffect": (v)=>allowedValues.find({
                        "useEmptySelectAllValue.useEffect": (f)=>f.name === (v._type === outputFieldTypeName ? v.relativePath : v.type)
                    }["useEmptySelectAllValue.useEffect"])
            }["useEmptySelectAllValue.useEffect"]), valueLength = value?.length ?? 0, validLength = validValues?.length ?? 0;
            (!validLength && valueLength || validLength >= allowedValues.length) && onChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from([
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["unset"])()
            ]));
        }
    }["useEmptySelectAllValue.useEffect"], [
        allowedValues,
        value,
        onChange
    ]);
}
function ObjectOutputInput({ fieldSchema, ...props }) {
    const { value, onChange } = props, fields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "ObjectOutputInput.useMemo[fields]": ()=>fieldSchema.fields.filter({
                "ObjectOutputInput.useMemo[fields]": (field)=>isAssistSupported(field.type)
            }["ObjectOutputInput.useMemo[fields]"])
    }["ObjectOutputInput.useMemo[fields]"], [
        fieldSchema.fields
    ]);
    useEmptySelectAllValue(value, fields, onChange);
    const onSelectChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "ObjectOutputInput.useCallback[onSelectChange]": (checked, selectedValue)=>{
            if (checked) if (value?.length) onChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["unset"])([
                {
                    _key: selectedValue
                }
            ])));
            else {
                const items = fields.filter({
                    "ObjectOutputInput.useCallback[onSelectChange].items": (f)=>f.name !== selectedValue
                }["ObjectOutputInput.useCallback[onSelectChange].items"]).map({
                    "ObjectOutputInput.useCallback[onSelectChange].items": (field)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])({
                            _key: field.name,
                            _type: "sanity.assist.output.field",
                            relativePath: field.name
                        })
                }["ObjectOutputInput.useCallback[onSelectChange].items"]);
                onChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from([
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["setIfMissing"])([]),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["insert"])(items, "after", [
                        -1
                    ])
                ]));
            }
            else {
                const patchValue = {
                    _key: selectedValue,
                    _type: "sanity.assist.output.field",
                    relativePath: selectedValue
                };
                onChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from([
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["setIfMissing"])([]),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["insert"])([
                        patchValue
                    ], "after", [
                        -1
                    ])
                ]));
            }
        }
    }["ObjectOutputInput.useCallback[onSelectChange]"], [
        onChange,
        value,
        fields
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
        space: 2,
        children: fields.map((field)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                align: "center",
                gap: 2,
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(Selectable, {
                    value: field.name,
                    title: field.type.title ?? field.name,
                    arrayValue: value,
                    onChange: onSelectChange
                })
            }, field.name))
    });
}
function ArrayOutputInput({ fieldSchema, ...props }) {
    const { value, onChange } = props, ofItems = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "ArrayOutputInput.useMemo[ofItems]": ()=>fieldSchema.of.filter({
                "ArrayOutputInput.useMemo[ofItems]": (itemType)=>isAssistSupported(itemType)
            }["ArrayOutputInput.useMemo[ofItems]"])
    }["ArrayOutputInput.useMemo[ofItems]"], [
        fieldSchema.of
    ]);
    useEmptySelectAllValue(value, ofItems, onChange);
    const onSelectChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "ArrayOutputInput.useCallback[onSelectChange]": (checked, selectedValue)=>{
            if (checked) if (value?.length) onChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["unset"])([
                {
                    _key: selectedValue
                }
            ])));
            else {
                const items = ofItems.filter({
                    "ArrayOutputInput.useCallback[onSelectChange].items": (f)=>f.name !== selectedValue
                }["ArrayOutputInput.useCallback[onSelectChange].items"]).map({
                    "ArrayOutputInput.useCallback[onSelectChange].items": (field)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])({
                            _key: field.name,
                            _type: "sanity.assist.output.type",
                            type: field.name
                        })
                }["ArrayOutputInput.useCallback[onSelectChange].items"]);
                onChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from([
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["setIfMissing"])([]),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["insert"])(items, "after", [
                        -1
                    ])
                ]));
            }
            else {
                const patchValue = {
                    _key: selectedValue,
                    _type: "sanity.assist.output.type",
                    type: selectedValue
                };
                onChange(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PatchEvent"].from([
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["setIfMissing"])([]),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["insert"])([
                        patchValue
                    ], "after", [
                        -1
                    ])
                ]));
            }
        }
    }["ArrayOutputInput.useCallback[onSelectChange]"], [
        onChange,
        value,
        ofItems
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
        space: 2,
        children: ofItems.map((itemType)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(Selectable, {
                    value: itemType.name,
                    title: isType(itemType, "block") ? "Text" : itemType.title ?? itemType.name,
                    arrayValue: value,
                    onChange: onSelectChange
                })
            }, itemType.name))
    });
}
function Selectable({ title, arrayValue, value, onChange }) {
    const checked = !arrayValue?.length || !!arrayValue?.find((v)=>v._key === value), handleChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Selectable.useCallback[handleChange]": ()=>onChange(checked, value)
    }["Selectable.useCallback[handleChange]"], [
        onChange,
        checked,
        value
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
        gap: 2,
        align: "flex-start",
        children: [
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Checkbox"], {
                checked,
                onChange: handleChange
            }),
            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
                marginTop: 1,
                onClick: handleChange,
                children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                    style: {
                        cursor: "default"
                    },
                    size: 1,
                    children: title
                })
            })
        ]
    });
}
function getRandomValues(typedArray) {
    const crypto = typeof window < "u" && "crypto" in window ? window.crypto : globalThis.crypto;
    if (!crypto || !crypto.getRandomValues) throw new Error("WebCrypto not available in this environment");
    return crypto.getRandomValues(typedArray);
}
function whatwgRNG(length = 16) {
    const rnds8 = new Uint8Array(length);
    return getRandomValues(rnds8), rnds8;
}
const getByteHexTable = /* @__PURE__ */ (()=>{
    let table;
    return ()=>{
        if (table) return table;
        table = [];
        for(let i = 0; i < 256; ++i)table[i] = (i + 256).toString(16).substring(1);
        return table;
    };
})();
function randomKey(length) {
    const table = getByteHexTable();
    return whatwgRNG(length).reduce((str, n)=>str + table[n], "").slice(0, length);
}
const PteMods = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$styled$2d$components$2f$dist$2f$styled$2d$components$2e$browser$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["styled"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"])`
  & [data-testid='pt-editor__toolbar-card'] > div > div:last-child {
    display: none;
  }
  & [data-testid='pt-editor'] {
    min-height: 300px;
  }
  & [data-testid='pt-editor'] .pt-inline-object * {
    max-width: 400px;
  }
`;
function PromptInput(props) {
    return useOnlyInlineBlocks(props), /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(PteMods, {
        children: props.renderDefault(props)
    });
}
function useOnlyInlineBlocks(props) {
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useOnlyInlineBlocks.useEffect": ()=>{
            let needsFix = !1;
            const val = (props.value ?? []).map({
                "useOnlyInlineBlocks.useEffect.val": (block)=>block._type === "block" ? block : (needsFix = !0, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["typed"])({
                        _key: randomKey(12),
                        _type: "block",
                        level: 0,
                        markDefs: [],
                        style: "normal",
                        children: [
                            block
                        ]
                    }))
            }["useOnlyInlineBlocks.useEffect.val"]);
            needsFix && props.onChange((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["set"])(val));
        }
    }["useOnlyInlineBlocks.useEffect"], []);
}
function InstructionsArrayField(props) {
    return props.renderDefault({
        ...props,
        title: " "
    });
}
function InstructionsArrayInput(props) {
    const user = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useCurrentUser"])(), originalValue = props.value, originalMembers = props.members, value = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "InstructionsArrayInput.useMemo[value]": ()=>(originalValue ?? []).filter({
                "InstructionsArrayInput.useMemo[value]": (v)=>!v.userId || v.userId === user?.id
            }["InstructionsArrayInput.useMemo[value]"])
    }["InstructionsArrayInput.useMemo[value]"], [
        originalValue,
        user
    ]), members = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "InstructionsArrayInput.useMemo[members]": ()=>(originalMembers ?? []).filter({
                "InstructionsArrayInput.useMemo[members]": (v)=>{
                    if (v.kind === "error") return !0;
                    const value2 = v?.item?.value;
                    return !value2.userId || value2.userId === user?.id;
                }
            }["InstructionsArrayInput.useMemo[members]"])
    }["InstructionsArrayInput.useMemo[members]"], [
        originalMembers,
        user
    ]);
    return props.renderDefault({
        ...props,
        value,
        members
    });
}
function HideReferenceChangedBannerInput(props) {
    const ref = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "HideReferenceChangedBannerInput.useEffect": ()=>{
            const parent = ref.current?.closest('[data-testid="pane-content"]');
            if (!parent) return;
            const style = document.createElement("style"), parentId = `id-${Math.random()}`.replace(".", "-");
            parent.id = parentId, style.innerText = `
      #${parentId} [data-testid="reference-changed-banner"] { display: none; }
    `, parent.prepend(style);
        }
    }["HideReferenceChangedBannerInput.useEffect"], [
        ref
    ]), /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
        ref,
        children: props.renderDefault(props)
    });
}
const contextDocumentSchema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "document",
    name: contextDocumentTypeName,
    title: "AI context",
    liveEdit: !0,
    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TokenIcon"],
    components: {
        input: HideReferenceChangedBannerInput
    },
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "title",
            title: "Title"
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            name: "context",
            type: "array",
            title: "Context",
            of: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineArrayMember"])({
                    type: "block",
                    styles: [
                        {
                            title: "Normal",
                            value: "normal"
                        }
                    ],
                    lists: [],
                    marks: {
                        decorators: [],
                        annotations: []
                    }
                })
            ]
        })
    ],
    preview: {
        select: {
            title: "title",
            context: "context"
        },
        prepare ({ title, context }) {
            const words = context?.flatMap((block)=>block?.children).flatMap((child)=>child?.text?.split(" ")).filter(Boolean)?.length ?? 0;
            return {
                title,
                subtitle: `Words: ${words}`,
                media: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DocumentTextIcon"]
            };
        }
    }
}), fieldReference = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "object",
    name: fieldReferenceTypeName,
    title: "Field",
    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ThListIcon"],
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "path",
            title: "Field",
            components: {
                input: FieldRefPathInput
            },
            validation: (rule)=>rule.custom((value, context)=>{
                    if (!value) return "Please select a field";
                    try {
                        const docId = context.document?._id;
                        if (!docId) return "Field reference cannot be used outside document inspector context. Could not resolve document id.";
                        const targetDocType = docId.replace(new RegExp(`^${assistDocumentIdPrefix}`), ""), schema = context.schema.get(targetDocType);
                        return schema ? getFieldRefsWithDocument(schema).find((r)=>r.key === value) ? !0 : `Field with path "${value}" does not exist in the schema.` : `Field reference cannot be used outside document inspector context. Could not resolve schema: ${targetDocType}`;
                    } catch (e) {
                        return console.error("Failed to resolve field reference", e), "Invalid field reference.";
                    }
                })
        })
    ],
    preview: {
        select: {
            path: "path"
        },
        prepare ({ path }) {
            return {
                title: path,
                path,
                icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CodeIcon"]
            };
        }
    },
    components: {
        preview: FieldRefPreview
    },
    options: {
        modal: {
            type: "popover"
        }
    }
}), userInput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "object",
    name: userInputTypeName,
    title: "User input",
    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ComposeIcon"],
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "message",
            title: "User input title",
            placeholder: "Provide instruction text",
            description: "The header above the user input text field",
            validation: (rule)=>rule.required()
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "text",
            rows: 3,
            name: "description",
            title: "User input description",
            description: "The description above the user input text field"
        })
    ],
    preview: {
        select: {
            title: "message"
        }
    },
    options: {
        modal: {
            type: "popover",
            width: 1
        }
    }
}), promptContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "object",
    name: instructionContextTypeName,
    title: contextDocumentSchema.title,
    icon: contextDocumentSchema.icon,
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "reference",
            name: "reference",
            to: [
                {
                    type: contextDocumentSchema.name
                }
            ],
            title: "Context",
            description: "The referenced context will be inserted into the instruction",
            validation: (rule)=>rule.required(),
            components: {
                input: function(props) {
                    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                        style: {
                            maxWidth: 300
                        },
                        children: props.renderDefault(props)
                    });
                }
            }
        })
    ],
    preview: {
        select: {
            ref: "reference._ref",
            title: "reference.title",
            context: "reference.context"
        },
        prepare (select) {
            return select.ref ? contextDocumentSchema?.preview?.prepare?.(select) ?? select : {
                title: "No reference selected",
                media: contextDocumentSchema.icon
            };
        }
    },
    options: {
        modal: {
            type: "popover",
            width: "auto"
        }
    }
}), prompt = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "array",
    name: promptTypeName,
    title: "Prompt",
    of: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineArrayMember"])({
            type: "block",
            styles: [
                {
                    title: "Normal",
                    value: "normal"
                }
            ],
            lists: [],
            marks: {
                decorators: [],
                annotations: []
            },
            of: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineArrayMember"])({
                    type: fieldReference.name
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineArrayMember"])({
                    type: promptContext.name
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineArrayMember"])({
                    type: userInput.name
                })
            ]
        })
    ]
}), outputFieldType = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "object",
    name: outputFieldTypeName,
    title: "Output field",
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "path",
            title: "Path"
        })
    ]
}), outputTypeType = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "object",
    name: outputTypeTypeName,
    title: "Output type",
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "type",
            title: "Type"
        })
    ]
}), instruction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "object",
    name: instructionTypeName,
    title: "Instruction",
    fieldsets: [
        {
            name: "appearance",
            title: "Appearance",
            options: {
                collapsible: !0,
                collapsed: !0
            }
        }
    ],
    preview: {
        select: {
            icon: "icon",
            title: "title",
            userId: "userId"
        },
        prepare: ({ icon, title, userId })=>({
                title,
                icon: icon ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["icons"][icon] : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SparklesIcon"],
                userId
            })
    },
    components: {
        input: InstructionInput,
        preview: (props)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                gap: 3,
                align: "center",
                padding: 2,
                children: [
                    props.icon && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                        flex: "none",
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                            size: 1,
                            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createElement"])(props.icon)
                        })
                    }),
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                        flex: 1,
                        space: 2,
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                            size: 1,
                            textOverflow: "ellipsis",
                            weight: "medium",
                            children: getInstructionTitle(props)
                        })
                    }),
                    props.userId && /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                        size: 1,
                        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Tooltip"], {
                            content: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Text"], {
                                size: 1,
                                children: "Only visible to you"
                            }),
                            padding: 2,
                            placement: "top",
                            portal: !0,
                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LockIcon"], {})
                        })
                    })
                ]
            })
    },
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: prompt.name,
            name: "prompt",
            title: "Instruction",
            description: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                children: [
                    "Learn from",
                    " ",
                    /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])("a", {
                        href: instructionGuideUrl,
                        target: "_blank",
                        rel: "noreferrer",
                        children: [
                            "our instruction guide ",
                            /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ArrowRightIcon"], {})
                        ]
                    })
                ]
            }),
            components: {
                input: PromptInput
            }
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "icon",
            title: "Icon",
            fieldset: "appearance",
            components: {
                field: HiddenFieldTitle,
                input: IconInput
            }
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "title",
            title: "Title",
            fieldset: "appearance",
            components: {
                field: HiddenFieldTitle
            }
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "userId",
            title: "Visibility",
            fieldset: "appearance",
            components: {
                field: HiddenFieldTitle,
                input: InstructionVisibility
            },
            initialValue: (params, context)=>context.currentUser?.id ?? "",
            readOnly: (context)=>!!(context.parent?.createdById && context.parent?.createdById !== context.currentUser?.id)
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "createdById",
            title: "Created by",
            hidden: !0,
            fieldset: "appearance",
            initialValue: (params, context)=>context.currentUser?.id ?? ""
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "array",
            name: "output",
            title: "Output filter",
            components: {
                input: InstructionOutputInput,
                field: InstructionOutputField
            },
            of: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineArrayMember"])({
                    type: outputFieldType.name
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineArrayMember"])({
                    type: outputTypeType.name
                })
            ]
        })
    ]
}), fieldInstructions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "object",
    name: assistFieldTypeName,
    title: "Field prompt",
    /*  components: {
    input: FieldPromptInput,
  },*/ fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "path",
            title: "Path",
            readOnly: !0,
            hidden: !0
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "array",
            name: "instructions",
            title: "Instructions",
            of: [
                {
                    type: instruction.name
                }
            ],
            components: {
                field: InstructionsArrayField,
                input: InstructionsArrayInput
            }
        })
    ],
    preview: {
        select: {
            title: "path"
        }
    }
}), assistDocumentSchema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    //NOTE: this is a document type. Using object here ensures it does not appear in structure menus
    type: "object",
    liveEdit: !0,
    name: assistDocumentTypeName,
    title: "AI Document",
    components: {
        input: AssistDocumentForm,
        field: (props)=>props.renderDefault({
                ...props,
                title: ""
            })
    },
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "title",
            title: "Title"
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "array",
            name: "fields",
            title: "Fields",
            of: [
                {
                    type: fieldInstructions.name
                }
            ]
        })
    ],
    preview: {
        select: {
            title: "title"
        }
    }
}), instructionTask = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    type: "object",
    name: instructionTaskTypeName,
    title: "Instruction task",
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "path",
            title: "Path"
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "instructionKey",
            title: "Instruction key"
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "datetime",
            name: "started",
            title: "Started"
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "datetime",
            name: "updated",
            title: "Updated"
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "string",
            name: "info",
            title: "Info"
        })
    ]
}), documentInstructionStatus = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineType"])({
    //NOTE: this is a document type. Using object here ensures it does not appear in structure menus
    type: "object",
    liveEdit: !0,
    name: assistTasksStatusTypeName,
    title: "Document instruction status",
    fields: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defineField"])({
            type: "array",
            name: "tasks",
            title: "Tasks",
            of: [
                {
                    type: instructionTask.name
                }
            ]
        })
    ]
});
function excludeComments(type) {
    const existingRender = type?.components?.field;
    return {
        ...type,
        ..."components" in type ? {
            components: {
                ...type.components,
                field: (props)=>{
                    const newProps = {
                        ...props,
                        __internal_comments: void 0
                    };
                    return typeof existingRender == "function" ? existingRender(newProps) : props.renderDefault(newProps);
                }
            }
        } : {},
        ..."fields" in type ? {
            // recursively disable comments in fields
            fields: type.fields?.map((field)=>excludeComments(field))
        } : {},
        ..."of" in type ? {
            // recursively disable comments in array items
            of: type.of?.map((arrayItemType)=>excludeComments(arrayItemType))
        } : {}
    };
}
const instructionForm = [
    fieldInstructions,
    instruction,
    fieldReference,
    prompt,
    userInput,
    promptContext
].map(excludeComments), schemaTypes = [
    ...instructionForm,
    outputFieldType,
    outputTypeType,
    assistDocumentSchema,
    documentInstructionStatus,
    instructionTask,
    contextDocumentSchema
], assist = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["definePlugin"])((config)=>{
    const configWithDefaults = config ?? {}, styleguide = configWithDefaults.translate?.styleguide || "";
    if (styleguide.length > 2e3) throw new Error(`[${packageName}]: \`translate.styleguide\` value is too long. It must be 2000 characters or less, was ${styleguide.length} characters`);
    return {
        name: packageName,
        handlesGDR: !0,
        schema: {
            types: schemaTypes
        },
        i18n: {
            bundles: [
                {}
            ]
        },
        document: {
            inspectors: (prev, context)=>{
                const documentType = context.documentType, docSchema = context.schema.get(documentType);
                return docSchema && isSchemaAssistEnabled(docSchema) ? [
                    ...prev,
                    assistInspector
                ] : prev;
            },
            unstable_fieldActions: (prev, { documentType, schema })=>{
                if (documentType === assistDocumentTypeName) return [];
                const docSchema = schema.get(documentType);
                return docSchema && isSchemaAssistEnabled(docSchema) ? [
                    ...prev,
                    assistFieldActions
                ] : prev;
            },
            unstable_languageFilter: (prev, { documentId, schema, schemaType })=>{
                if (schemaType === assistDocumentTypeName) return [];
                const docSchema = schema.get(schemaType);
                return docSchema && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$types$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isObjectSchemaType"])(docSchema) && isSchemaAssistEnabled(docSchema) ? [
                    ...prev,
                    createAssistDocumentPresence(documentId)
                ] : prev;
            },
            components: {
                unstable_layout: AssistDocumentLayout
            }
        },
        studio: {
            components: {
                layout: function(props) {
                    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(AssistLayout, {
                        ...props,
                        config: configWithDefaults
                    });
                }
            }
        },
        form: {
            components: {
                input: AssistDocumentInputWrapper,
                field: AssistFieldWrapper,
                item: AssistItem,
                block: AssistFormBlock,
                inlineBlock: AssistInlineFormBlock
            }
        },
        plugins: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["definePlugin"])({
                name: `${packageName}/safe-value-input`,
                form: {
                    components: {
                        input: SafeValueInput
                    }
                }
            })(),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["definePlugin"])({
                name: `${packageName}/generate-caption`,
                form: {
                    components: {
                        input: (props)=>{
                            const { schemaType } = props;
                            return isImage(schemaType) ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(ImageContextProvider, {
                                ...props
                            }) : props.renderDefault(props);
                        }
                    }
                }
            })()
        ]
    };
}), fetch = (client, query, params, options2)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$defer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defer"])(()=>// getVersionedClient(options.apiVersion)
        client.observable.fetch(query, params, {
            tag: options2.tag,
            filterResponse: !0
        })), listen = (client, query, params, options2)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$defer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["defer"])(()=>// getVersionedClient(options.apiVersion)
        client.listen(query, params, {
            events: [
                "welcome",
                "mutation",
                "reconnect"
            ],
            includeResult: !1,
            visibility: "query",
            tag: options2.tag
        }));
function isWelcomeEvent(event) {
    return event.type === "welcome";
}
const listenQuery = (client, query, params = {}, options2 = {})=>{
    const fetchQuery = query, listenerQuery = query, fetchOnce$ = fetch(client, fetchQuery, params, options2), events$ = listen(client, listenerQuery, params, options2).pipe((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$mergeMap$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mergeMap"])((ev, i)=>i === 0 && !isWelcomeEvent(ev) ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$throwError$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["throwError"])(new Error(ev.type === "reconnect" ? "Could not establish EventSource connection" : `Received unexpected type of first event "${ev.type}"`)) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$of$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["of"])(ev)), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$share$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["share"])()), [welcome$, mutationAndReconnect$] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$partition$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["partition"])(events$, isWelcomeEvent), isRelevantEvent = (event)=>!options2.transitions || event.type !== "mutation" ? !0 : options2.transitions.includes(event.transition);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$merge$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["merge"])(welcome$.pipe((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$take$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["take"])(1)), mutationAndReconnect$.pipe((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$filter$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["filter"])(isRelevantEvent), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$switchMap$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["switchMap"])((event)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$merge$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["merge"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$of$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["of"])(event), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$observable$2f$of$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["of"])(event).pipe((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$delay$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["delay"])(options2.throttleTime || 1e3)))))).pipe((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2d$exhaustmap$2d$with$2d$trailing$2f$dist$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["exhaustMapToWithTrailing"])(fetchOnce$));
}, DEFAULT_PARAMS = {}, DEFAULT_OPTIONS = {
    apiVersion: "v2022-05-09"
};
function useListeningQuery(query, params = DEFAULT_PARAMS, options2 = DEFAULT_OPTIONS) {
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!0), [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1), [data, setData] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null), subscription = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null), client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useClient"])({
        apiVersion: "v2022-05-09"
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useListeningQuery.useEffect": ()=>(subscription.current = listenQuery(client, query, params, options2).pipe((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$distinctUntilChanged$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["distinctUntilChanged"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$react$2d$fast$2d$compare$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"]), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$rxjs$2f$dist$2f$esm5$2f$internal$2f$operators$2f$catchError$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["catchError"])({
                "useListeningQuery.useEffect": (err)=>(console.error(err), setError(err), setLoading(!1), setData(null), err)
            }["useListeningQuery.useEffect"])).subscribe({
                "useListeningQuery.useEffect": (documents)=>{
                    setData({
                        "useListeningQuery.useEffect": (current)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$react$2d$fast$2d$compare$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"])(current, documents) ? current : documents
                    }["useListeningQuery.useEffect"]), setLoading(!1), setError(!1);
                }
            }["useListeningQuery.useEffect"]), ({
                "useListeningQuery.useEffect": ()=>subscription.current ? subscription.current.unsubscribe() : void 0
            })["useListeningQuery.useEffect"])
    }["useListeningQuery.useEffect"], [
        query,
        params,
        options2,
        client
    ]), {
        loading,
        error,
        data
    };
}
const NO_DATA = [], defaultTitle = "Sync schema";
function SchemaTypeTool() {
    const schema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useSchema"])(), client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sanity$2f$lib$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useClient"])({
        apiVersion: "2023-01-01"
    }), [saving, setSaving] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!1), [syncTitle, setSyncTitle] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(defaultTitle), { data } = useListeningQuery("*[_type==$type] | order(_type)", {
        type: assistSerializedTypeName
    }), types = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "SchemaTypeTool.useMemo[types]": ()=>serializeSchema(schema)
    }["SchemaTypeTool.useMemo[types]"], [
        schema
    ]), storeTypes = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "SchemaTypeTool.useCallback[storeTypes]": ()=>{
            setSaving(!0);
            let canSave = !0;
            async function store() {
                setSyncTitle(`Syncing 0/${types.length}`);
                const transaction = client.transaction();
                for(let i = 0; i < types.length && canSave; i++){
                    const type = types[i];
                    await transaction.createOrReplace(type), i > 0 && i % 50 === 0 && (await transaction.commit(), transaction.reset(), setSyncTitle(`Syncing ${i}/${types.length}`));
                }
                await transaction.commit();
            }
            return store().catch(console.error).finally({
                "SchemaTypeTool.useCallback[storeTypes]": ()=>{
                    setSaving(!1), setSyncTitle(defaultTitle);
                }
            }["SchemaTypeTool.useCallback[storeTypes]"]), ({
                "SchemaTypeTool.useCallback[storeTypes]": ()=>{
                    canSave = !1, setSaving(!1), setSyncTitle(defaultTitle);
                }
            })["SchemaTypeTool.useCallback[storeTypes]"];
        }
    }["SchemaTypeTool.useCallback[storeTypes]"], [
        types,
        client,
        setSaving,
        setSyncTitle
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        padding: 4,
        overflow: "auto",
        style: {
            height: "calc(100vh - 81px)"
        },
        children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
            space: 4,
            children: [
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Box"], {
                    children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                        icon: saving ? /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Spinner"], {
                            style: {
                                marginTop: 5
                            }
                        }) : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$icons$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SyncIcon"],
                        text: syncTitle,
                        disabled: saving,
                        onClick: storeTypes
                    })
                }),
                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Flex"], {
                    gap: 2,
                    children: [
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                            space: 2,
                            children: [
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Label"], {
                                    children: "Studio schema"
                                }),
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("ul", {
                                    children: types.map((type)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("li", {
                                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(SchemaEntry, {
                                                schemaStub: type
                                            })
                                        }, type.name))
                                })
                            ]
                        }),
                        /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Stack"], {
                            space: 2,
                            children: [
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sanity$2f$ui$2f$dist$2f$_chunks$2d$es$2f$_visual$2d$editing$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Label"], {
                                    children: "Stored schema"
                                }),
                                /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("ul", {
                                    children: (data ?? NO_DATA).map((type)=>/* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("li", {
                                            children: /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])(SchemaEntry, {
                                                schemaStub: type
                                            })
                                        }, type.name))
                                })
                            ]
                        })
                    ]
                })
            ]
        })
    });
}
function SchemaEntry({ schemaStub }) {
    const out = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "SchemaEntry.useMemo[out]": ()=>JSON.stringify(schemaStub, null, 2)
    }["SchemaEntry.useMemo[out]"], [
        schemaStub
    ]);
    return /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsx"])("pre", {
        children: out
    });
}
;
 //# sourceMappingURL=index.mjs.map
}}),
}]);

//# sourceMappingURL=node_modules_%40sanity_assist_dist_index_mjs_cec53dff._.js.map